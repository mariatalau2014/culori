<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Super Jocuri Educa»õionale</title>
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@400;700&family=Comic+Sans+MS&display=swap" rel="stylesheet">
<style>
/* --- STILURI GENERALE & VARIABILE --- */
:root {
--boy-bg: #E3F2FD; --boy-primary: #2196F3; --boy-secondary: #4FC3F7; --boy-accent: #4CAF50;
--girl-bg: #FCE4EC; --girl-primary: #EC407A; --girl-secondary: #F48FB1; --girl-accent: #AB47BC;
--pro-bg: #263238; --pro-card: #37474F; --pro-text: #ECEFF1; --pro-accent: #00E5FF;
--text-color: #455A64; --card-bg: #FFFFFF; --success: #66BB6A; --error: #EF5350;
--timer-warning: #FF9800; --timer-danger: #F44336; --gold: #FFD700; --silver: #C0C0C0; --bronze: #CD7F32;
--letter-primary: #FF85A2; --letter-secondary: #A2D2FF; --letter-accent: #FFC8DD;
}
* { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Comic Sans MS', 'Chalkboard SE', sans-serif; user-select: none; -webkit-tap-highlight-color: transparent; }
body { background-color: var(--girl-bg); background-image: radial-gradient(#F8BBD0 15%, transparent 16%), radial-gradient(#F8BBD0 15%, transparent 16%); background-size: 60px 60px; background-position: 0 0, 30px 30px; color: var(--text-color); min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow-x: hidden; transition: background 0.5s ease; }
body.boy-theme { background-color: var(--boy-bg); background-image: radial-gradient(#BBDEFB 15%, transparent 16%), radial-gradient(#BBDEFB 15%, transparent 16%); }
body.pro-theme { background-color: var(--pro-bg); background-image: radial-gradient(#455A64 15%, transparent 16%); color: var(--pro-text); }
.background-shapes { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; overflow: hidden; pointer-events: none; }
.shape { position: absolute; opacity: 0.4; animation: float 15s infinite linear; }
@keyframes float { 0% { transform: translateY(100vh) rotate(0deg); } 100% { transform: translateY(-100px) rotate(360deg); } }

/* --- MENIU PRINCIPAL --- */
.container { width: 95%; max-width: 500px; text-align: center; padding: 1rem; }
h1 { font-size: 2.2rem; margin-bottom: 1.5rem; color: var(--girl-primary); text-shadow: 2px 2px 0px #FFF; transition: color 0.5s; font-family: 'Fredoka One', cursive; }
body.boy-theme h1 { color: var(--boy-primary); text-shadow: none; }
body.pro-theme h1 { color: var(--pro-accent); text-shadow: 0 0 10px rgba(0, 229, 255, 0.5); }
.menu-grid { display: grid; grid-template-columns: 1fr; gap: 1rem; width: 100%; margin-bottom: 1.5rem; }
.big-card { background: var(--card-bg); border-radius: 20px; padding: 1.2rem; cursor: pointer; transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); box-shadow: 0 8px 0 rgba(0,0,0,0.1); border: 4px solid #FFF; display: flex; flex-direction: row; align-items: center; justify-content: flex-start; min-height: 100px; position: relative; gap: 15px; }
body.pro-theme .big-card { background: var(--pro-card); color: var(--pro-text); border: 2px solid var(--pro-accent); }
.big-card:hover { transform: translateY(-5px) scale(1.02); box-shadow: 0 12px 0 rgba(0,0,0,0.1); }
.big-card-icon { font-size: 2.5rem; filter: drop-shadow(0 5px 5px rgba(0,0,0,0.2)); flex-shrink: 0; }
.big-card-content { display: flex; flex-direction: column; align-items: flex-start; text-align: left; }
.big-card-title { font-weight: 900; font-size: 1.3rem; margin-bottom: 0.3rem; font-family: 'Fredoka One', cursive; }
body.pro-theme .big-card-title { color: var(--pro-text); }
body:not(.pro-theme) .big-card-title { color: var(--text-color); }
.big-card-desc { font-size: 0.9rem; line-height: 1.3; font-weight: 600; opacity: 0.8; }

/* --- STILURI JOC MATEMATIC --- */
.sub-menu-grid { display: grid; grid-template-columns: 1fr; gap: 1rem; width: 100%; }
.card { background: var(--card-bg); border-radius: 20px; padding: 1rem; cursor: pointer; transition: all 0.3s; box-shadow: 0 6px 0 rgba(0,0,0,0.1); border: 3px solid #FFF; display: flex; flex-direction: row; align-items: center; gap: 15px; min-height: 90px; text-align: left; }
body.pro-theme .card { background: var(--pro-card); color: var(--pro-text); border: 2px solid var(--pro-accent); }
.card:hover { transform: translateY(-5px); box-shadow: 0 10px 0 rgba(0,0,0,0.1); }
.card.kg-card { border-bottom: 4px solid var(--boy-accent); }
.card.easy-card { border-bottom: 4px solid var(--girl-secondary); }
.card.pro-card { border-bottom: 4px solid var(--pro-accent); }
.card-icon { font-size: 2rem; flex-shrink: 0; }
.card-title { font-weight: 900; font-size: 1.1rem; margin-bottom: 0.2rem; }
.card-desc { font-size: 0.8rem; line-height: 1.3; font-weight: 600; opacity: 0.8; }
.game-area { display: none; background: var(--card-bg); border-radius: 20px; padding: 1.5rem; box-shadow: 0 8px 20px rgba(0,0,0,0.1); width: 100%; max-width: 400px; animation: popIn 0.5s; border: 4px solid var(--girl-secondary); transition: border-color 0.5s, background 0.5s, color 0.5s; }
body.boy-theme .game-area { border-color: var(--boy-secondary); }
body.pro-theme .game-area { border-color: var(--pro-accent); background: var(--pro-card); color: var(--pro-text); }
@keyframes popIn { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
.stats-bar { display: flex; justify-content: space-between; margin-bottom: 0.8rem; font-size: 1.1rem; font-weight: 800; color: var(--girl-primary); background: #F8BBD0; padding: 8px 15px; border-radius: 30px; transition: all 0.5s; }
body.boy-theme .stats-bar { color: var(--boy-primary); background: #BBDEFB; }
body.pro-theme .stats-bar { color: var(--pro-bg); background: var(--pro-accent); }
.timer-container { width: 100%; height: 12px; background-color: #eee; border-radius: 8px; margin-bottom: 1rem; overflow: hidden; border: 2px solid #ddd; }
.timer-bar { height: 100%; width: 100%; background-color: var(--success); transition: width 1s linear, background-color 0.5s; }
.visual-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin: 15px 0; min-height: 60px; align-items: center; }
.ball { width: 35px; height: 35px; border-radius: 50%; box-shadow: inset -3px -3px 10px rgba(0,0,0,0.1), 3px 3px 5px rgba(0,0,0,0.15); animation: bounce 2s infinite ease-in-out; border: 2px solid rgba(255,255,255,0.3); }
@keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
.sequence-display { font-size: 2.5rem; font-weight: 900; letter-spacing: 3px; margin: 15px 0; }
body:not(.pro-theme) .sequence-display { color: var(--text-color); }
body.pro-theme .sequence-display { color: var(--pro-text); }
.missing-number { color: var(--girl-primary); border-bottom: 3px dashed var(--girl-primary); padding: 0 8px; }
body.boy-theme .missing-number { color: var(--boy-primary); border-bottom-color: var(--boy-primary); }
body.pro-theme .missing-number { color: var(--pro-accent); border-bottom-color: var(--pro-accent); }
.problem-display { font-size: 3rem; font-weight: 900; margin: 0.8rem 0; color: var(--girl-primary); transition: color 0.5s; }
body.boy-theme .problem-display { color: var(--boy-primary); }
body.pro-theme .problem-display { color: var(--pro-accent); }
.input-group { display: flex; gap: 0.5rem; justify-content: center; margin-bottom: 1rem; }
input[type="number"], input[type="text"] { width: 100px; padding: 0.6rem; font-size: 1.8rem; text-align: center; border: 2px solid var(--girl-secondary); border-radius: 15px; outline: none; transition: all 0.3s; font-family: inherit; background: #FFF; }
body.pro-theme input[type="number"], body.pro-theme input[type="text"] { border-color: var(--pro-accent); background: #263238; color: white; }
body:not(.pro-theme) input[type="number"] { color: var(--text-color); }
input[type="number"]:focus, input[type="text"]:focus { border-color: var(--girl-primary); transform: scale(1.05); }
body.boy-theme input[type="number"]:focus { border-color: var(--boy-primary); }
body.pro-theme input[type="number"]:focus { border-color: var(--pro-accent); }
input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
input[type=number] { -moz-appearance: textfield; }
.choices-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem; margin-top: 1.5rem; }
.choice-btn { background: white; border: 3px solid var(--boy-secondary); border-radius: 15px; padding: 1rem; font-size: 1.5rem; font-weight: 900; color: var(--boy-primary); cursor: pointer; transition: all 0.2s; box-shadow: 0 4px 0 #0277BD; font-family: inherit; }
.choice-btn:active { transform: translateY(4px); box-shadow: none; }
.choice-btn:hover { background: #E1F5FE; }
.btn { padding: 0.8rem 1.5rem; font-size: 1.1rem; border: none; border-radius: 40px; cursor: pointer; font-weight: 900; transition: all 0.2s; color: white; font-family: inherit; text-transform: uppercase; letter-spacing: 1px; box-shadow: 0 4px 0 rgba(0,0,0,0.1); }
.btn:active { transform: translateY(3px); box-shadow: none; }
.btn-primary { background-color: var(--girl-primary); box-shadow: 0 4px 0 #C2185B; transition: background 0.5s, box-shadow 0.5s; }
body.boy-theme .btn-primary { background-color: var(--boy-primary); box-shadow: 0 4px 0 #1565C0; }
body.pro-theme .btn-primary { background-color: var(--pro-accent); color: var(--pro-bg); box-shadow: 0 4px 0 #00B8D4; }
.btn-secondary { background-color: #B0BEC5; box-shadow: 0 4px 0 #78909C; margin-top: 0.8rem; font-size: 0.9rem; padding: 0.6rem 1.2rem; }
.feedback { height: 2.5rem; margin-top: 0.8rem; font-weight: 900; font-size: 1.1rem; line-height: 1.3; }
.feedback.correct { color: var(--success); }
.feedback.wrong { color: var(--error); }
.back-btn { position: absolute; top: 10px; left: 10px; background: white; border: none; padding: 8px 15px; border-radius: 40px; cursor: pointer; font-weight: 900; box-shadow: 0 3px 8px rgba(0,0,0,0.1); display: flex; align-items: center; gap: 5px; z-index: 10; font-family: inherit; color: var(--girl-primary); transition: all 0.5s; font-size: 0.9rem; }
body.boy-theme .back-btn { color: var(--boy-primary); }
body.pro-theme .back-btn { color: var(--pro-bg); background: var(--pro-accent); }
.back-btn:hover { transform: scale(1.05); }
.award-container, .leaderboard-container { display: none; flex-direction: column; align-items: center; justify-content: center; animation: popIn 0.8s; background: white; padding: 1.5rem; border-radius: 20px; box-shadow: 0 8px 25px rgba(0,0,0,0.2); max-width: 90%; margin: 0 auto; }
.award-icon { font-size: 5rem; margin: 0.5rem 0; filter: drop-shadow(0 8px 8px rgba(0,0,0,0.2)); animation: float 3s infinite ease-in-out; }
.award-title { font-size: 2rem; font-weight: 900; margin-bottom: 0.8rem; text-transform: uppercase; }
.award-gold { color: var(--gold); text-shadow: 2px 2px 0 #B8860B; }
.award-silver { color: var(--silver); text-shadow: 2px 2px 0 #78909C; }
.award-bronze { color: var(--bronze); text-shadow: 2px 2px 0 #8D6E63; }
.award-mention { color: var(--boy-primary); text-shadow: 2px 2px 0 #1565C0; }
.award-try { color: var(--error); text-shadow: 2px 2px 0 #C62828; }
.final-score { font-size: 1.5rem; color: var(--text-color); margin-bottom: 0.8rem; font-weight: bold; }
.name-input-group { margin: 1rem 0; display: flex; flex-direction: column; gap: 8px; align-items: center; }
.name-input-group label { font-size: 1rem; font-weight: bold; color: var(--text-color); }
.name-input-group input { width: 100%; font-size: 1.2rem; padding: 0.4rem; }
.leaderboard-table { width: 100%; border-collapse: collapse; margin: 0.8rem 0; font-size: 0.9rem; }
.leaderboard-table th { background: var(--girl-primary); color: white; padding: 8px; border-radius: 8px 8px 0 0; }
body.pro-theme .leaderboard-table th { background: var(--pro-accent); color: var(--pro-bg); }
body.boy-theme .leaderboard-table th { background: var(--boy-primary); }
.leaderboard-table td { padding: 8px; border-bottom: 1px solid #eee; text-align: center; }
.leaderboard-table tr:nth-child(even) { background-color: #f9f9f9; }
.leaderboard-table tr:first-child td { font-weight: bold; color: var(--gold); }
.leaderboard-table tr:nth-child(2) td { font-weight: bold; color: var(--silver); }
.leaderboard-table tr:nth-child(3) td { font-weight: bold; color: var(--bronze); }

/* --- STILURI JOC SƒÇRITURI --- */
#jumpGameContainer { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #222; z-index: 200; touch-action: none; }
#jumpCanvas { display: block; width: 100%; height: 100%; }
#jumpUI { position: absolute; top: 10px; left: 10px; color: white; font-size: 16px; font-weight: bold; text-shadow: 2px 2px 4px #000; z-index: 10; pointer-events: none; display: flex; flex-direction: column; gap: 5px; }
#jumpMenu { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: flex; flex-direction: column; justify-content: center; align-items: center; color: white; z-index: 20; padding: 20px; }
#jumpWinScreen { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(46, 213, 115, 0.95); display: none; flex-direction: column; justify-content: center; align-items: center; color: white; z-index: 30; text-align: center; padding: 20px; }

/* --- STILURI JOC LITERE --- */
#letterGameContainer { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #FFF0F5; background-image: url('https://image.qwenlm.ai/public_source/9d076338-2b12-4553-8888-4cf6f0866228/1206da42b-50bc-4579-b502-e76be98f8371.png'); background-size: cover; z-index: 200; touch-action: none; font-family: 'Nunito', sans-serif; }
.letter-card-ui { background: rgba(255, 255, 255, 0.95); width: 95%; height: 95%; max-height: 90vh; border-radius: 20px; box-shadow: 0 8px 20px rgba(255, 133, 162, 0.3); display: flex; flex-direction: column; align-items: center; padding: 10px; position: relative; backdrop-filter: blur(5px); margin: 2.5% auto; }
.letter-header { text-align: center; width: 100%; margin-bottom: 5px; flex-shrink: 0; }
.letter-header h1 { font-family: 'Fredoka One', cursive; color: var(--letter-primary); font-size: 1.5rem; margin: 0; text-shadow: 2px 2px 0px #FFE5EC; }
.letter-score { background: var(--letter-secondary); color: white; padding: 4px 12px; border-radius: 15px; font-weight: bold; font-size: 1rem; display: inline-block; margin-top: 5px; box-shadow: 0 3px 0 #7AB8E8; }
.letter-play-area { flex: 1; width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 10px; min-height: 0; }
.letter-card-display { background: var(--letter-accent); width: 80px; height: 80px; border-radius: 20px; display: flex; justify-content: center; align-items: center; font-family: 'Fredoka One', cursive; font-size: 3rem; color: var(--letter-primary); box-shadow: 0 6px 0 #FFB3C6; transition: transform 0.2s; position: relative; flex-shrink: 0; border: 3px solid transparent; }
.letter-card-display.bounce { animation: bounce 0.5s; }
.letter-card-display.shake { animation: shake 0.5s; border-color: var(--error); }
@keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-8px); } 75% { transform: translateX(8px); } }
.letter-canvas-container { position: relative; width: 100%; max-width: 300px; aspect-ratio: 1; background: white; border: 3px dashed var(--letter-secondary); border-radius: 20px; box-shadow: inset 0 0 15px rgba(0,0,0,0.05); flex-shrink: 0; }
.letter-canvas-container canvas { border-radius: 15px; width: 100%; height: 100%; display: block; position: absolute; top: 0; left: 0; }
#guideCanvas { z-index: 1; pointer-events: none; }
#drawCanvas { z-index: 2; }
.letter-clear-btn { position: absolute; top: 5px; right: 5px; background: #FFD1DC; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; display: flex; justify-content: center; align-items: center; box-shadow: 0 3px 0 #FFB3C6; z-index: 10; }
.letter-clear-btn:active { transform: translateY(3px); box-shadow: none; }
.letter-clear-btn svg { width: 15px; height: 15px; fill: #D65A78; }
.letter-action-btn { background: var(--letter-primary); color: white; border: none; padding: 12px 25px; font-family: 'Fredoka One', cursive; font-size: 1.2rem; border-radius: 40px; cursor: pointer; box-shadow: 0 5px 0 #D65A78; transition: all 0.1s; width: 90%; max-width: 250px; flex-shrink: 0; margin-top: auto; margin-bottom: 5px; display: flex; justify-content: center; align-items: center; gap: 8px; }
.letter-action-btn:active { transform: translateY(5px); box-shadow: none; }
.letter-action-btn.next { background: var(--success); box-shadow: 0 5px 0 #8AC4E0; }
.letter-action-btn.skip { background: var(--timer-warning); color: #5E6472; box-shadow: 0 5px 0 #E5C335; }
.letter-feedback-overlay { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255,255,255,0.95); display: flex; flex-direction: column; justify-content: center; align-items: center; font-family: 'Fredoka One', cursive; font-size: 2.5rem; pointer-events: none; opacity: 0; transition: opacity 0.3s; z-index: 100; border-radius: 20px; text-align: center; padding: 15px; }
.letter-feedback-overlay.show { opacity: 1; animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
.letter-feedback-overlay.fail { color: var(--error); }
.letter-feedback-overlay.success { color: var(--letter-primary); }
#letterConfetti { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 200; border-radius: 20px; }
.letter-mascot-img { position: absolute; top: -30px; right: -20px; width: 70px; height: auto; z-index: 5; filter: drop-shadow(0 4px 4px rgba(0,0,0,0.1)); }

/* --- STILURI JOC COORDONATE --- */
#coordGameContainer { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #4b0082; z-index: 200; touch-action: none; font-family: 'Arial', sans-serif; color: white; overflow-y: auto; }
.coord-wrapper { display: flex; flex-direction: column; align-items: center; min-height: 100vh; padding: 5px; }
.coord-h1 { margin: 5px 0 3px 0; font-size: 1.2rem; text-align: center; font-family: 'Fredoka One', cursive; color: #ffd700; }
.coord-p { margin: 0 0 8px 0; font-size: 0.8rem; text-align: center; max-width: 95%; color: #ddd; }
#coord-board-wrapper { display: grid; grid-template-columns: 30px 1fr; grid-template-rows: 30px 1fr; gap: 1px; background-color: #ccc; border: 4px solid #ffd700; box-shadow: 0 0 20px rgba(255, 215, 0, 0.4); border-radius: 4px; overflow: hidden; touch-action: none; }
.corner-box { background-color: #2a0a4a; grid-column: 1; grid-row: 1; display: flex; justify-content: center; align-items: center; font-size: 0.7rem; color: #aaa; }
#axis-x { grid-column: 2; grid-row: 1; display: grid; gap: 1px; background-color: #ccc; }
#axis-y { grid-column: 1; grid-row: 2; display: grid; gap: 1px; background-color: #ccc; }
#game-area-coord { grid-column: 2; grid-row: 2; display: grid; gap: 1px; background-color: #ccc; position: relative; }
.axis-number { background-color: #2a0a4a; color: #ffd700; display: flex; justify-content: center; align-items: center; font-weight: bold; font-size: 0.8rem; width: 100%; height: 100%; }
.cell-coord { background-color: #f9f9f9; width: 30px; height: 30px; display: flex; justify-content: center; align-items: center; cursor: pointer; position: relative; }
.cell-coord.highlight { animation: blink 1s infinite; background-color: #e0e0e0; }
@keyframes blink { 0% { background-color: #e0e0e0; } 50% { background-color: #ffffff; } 100% { background-color: #e0e0e0; } }
.crystal { width: 70%; height: 70%; border-radius: 4px; transform: rotate(45deg); box-shadow: inset 2px 2px 5px rgba(255,255,255,0.8), inset -2px -2px 5px rgba(0,0,0,0.3), 0 0 6px currentColor; animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); position: relative; }
.crystal::after { content: ''; position: absolute; top: 10%; left: 10%; width: 30%; height: 30%; background: rgba(255,255,255,0.9); border-radius: 50%; filter: blur(1px); }
@keyframes popIn { from { transform: scale(0) rotate(45deg); opacity: 0; } to { transform: scale(1) rotate(45deg); opacity: 1; } }
#coord-controls { margin-top: 10px; display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; background: rgba(0,0,0,0.4); padding: 10px; border-radius: 15px; width: 95%; max-width: 400px; align-items: center; }
.color-btn { width: 28px; height: 28px; border-radius: 50%; border: 2px solid white; transition: all 0.3s; flex-shrink: 0; opacity: 0.6; }
.color-btn.auto-selected { border: 3px solid #ffff00; transform: scale(1.3); opacity: 1; box-shadow: 0 0 15px #ffff00; z-index: 10; }
.action-btn-coord { padding: 8px 12px; border: none; border-radius: 6px; font-weight: bold; color: white; cursor: pointer; box-shadow: 0 3px rgba(0,0,0,0.3); font-size: 0.8rem; }
.action-btn-coord:active { transform: translateY(2px); box-shadow: 0 1px rgba(0,0,0,0.3); }
.btn-start { background-color: #4CAF50; box-shadow: 0 3px #2E7D32; }
.btn-clear { background-color: #d32f2f; box-shadow: 0 3px #b71c1c; border: 2px solid #ffeb3b; }
.btn-clear:hover { background-color: #f44336; transform: scale(1.05); }
.btn-clear:active { box-shadow: 0 1px #b71c1c; transform: translateY(2px); }
.btn-undo { background-color: #2196F3; width: 35px; height: 35px; padding: 0; font-size: 1rem; display: flex; align-items: center; justify-content: center; }
.btn-undo:disabled { background-color: #ccc; box-shadow: none; opacity: 0.5; cursor: not-allowed; }
#status-box { margin-top: 8px; padding: 10px; background: rgba(255, 255, 255, 0.15); border-radius: 6px; text-align: center; font-weight: bold; min-height: 20px; color: #ffd700; font-size: 1rem; border: 1px solid rgba(255,255,255,0.2); }

@media (max-width: 400px) {
  h1 { font-size: 1.8rem; }
  .problem-display { font-size: 2.5rem; }
  .card, .big-card { min-height: 80px; }
  .choices-grid { grid-template-columns: 1fr; }
  .award-icon { font-size: 4rem; }
  .award-title { font-size: 1.5rem; }
  .letter-card-display { width: 70px; height: 70px; font-size: 2.5rem; }
  .cell-coord { width: 25px; height: 25px; }
  #axis-x, #axis-y { grid-template-columns: repeat(10, 25px); grid-template-rows: repeat(12, 25px); }
}
</style>
</head>
<body>
<div class="background-shapes" id="bg-shapes"></div>
<!-- Meniu Principal -->
<div class="container" id="mainContainer">
<h1>Super Jocuri</h1>
<div class="menu-grid">
<!-- Buton Joc Matematic -->
<div class="big-card" onclick="openMathMenu()">
<div class="big-card-icon">üßÆ</div>
<div class="big-card-content">
<div class="big-card-title">Joc Matematic</div>
<div class="big-card-desc">Exerci»õii de adunare, scƒÉdere, √Ænmul»õire!</div>
</div>
</div>
<!-- Buton Joc SƒÉrituri -->
<div class="big-card" onclick="openJumpGame()">
<div class="big-card-icon">ü¶ï</div>
<div class="big-card-content">
<div class="big-card-title">Aventura Eroului</div>
<div class="big-card-desc">Sari peste obstacole »ôi c√¢»ôtigƒÉ trofee!</div>
</div>
</div>
<!-- Buton Joc Litere -->
<div class="big-card" onclick="openLetterGame()">
<div class="big-card-icon">‚úèÔ∏è</div>
<div class="big-card-content">
<div class="big-card-title">Litere Magice</div>
<div class="big-card-desc">DeseneazƒÉ literele »ôi numerele pe contur!</div>
</div>
</div>
<!-- Buton Joc Coordonate -->
<div class="big-card" onclick="openCoordGame()">
<div class="big-card-icon">üíé</div>
<div class="big-card-content">
<div class="big-card-title">Coordonate</div>
<div class="big-card-desc">GƒÉse»ôte pozi»õia corectƒÉ pe tablƒÉ!</div>
</div>
</div>
</div>
</div>

<!-- Interfa»õƒÉ Joc Matematic -->
<button class="back-btn" id="mathBackBtn" style="display: none;" onclick="showMainMenu()">‚Üê √énapoi</button>
<div class="container" id="mathContainer" style="display: none;">
<div id="mathMainMenu">
<h1>Alege Nivelul</h1>
<div class="sub-menu-grid" id="mathMenuGrid"></div>
<button class="btn btn-secondary" onclick="showMainMenu()" style="margin-top: 1.5rem;">√énapoi la Meniu</button>
</div>
<div id="mathSubMenu" style="display: none;">
<h2 id="mathSubMenuTitle">ActivitƒÉ»õi:</h2>
<div class="sub-menu-grid" id="mathSubMenuGrid"></div>
<button class="btn btn-secondary" onclick="openMathMenu()" style="margin-top: 1.5rem;">√énapoi</button>
</div>
<div id="mathGameArea" class="game-area">
<div class="stats-bar">
<span id="mathScoreDisplay">Scor: 100</span>
<span id="mathProgressDisplay">Exerci»õiul: 1/20</span>
</div>
<div class="timer-container"><div class="timer-bar" id="mathTimerBar"></div></div>
<div id="mathGameContent"></div>
<div id="mathChoicesContainer" class="choices-grid" style="display: none;"></div>
<div id="mathInputContainer" class="input-group" style="display: none;">
<input type="number" id="mathAnswerInput" placeholder="?" autocomplete="off" step="0.1">
<button class="btn btn-primary" onclick="checkMathAnswer()">VerificƒÉ</button>
</div>
<div class="feedback" id="mathFeedbackText"></div>
<button class="btn btn-secondary" onclick="openMathMenu()">Ie»ôire</button>
</div>
<div id="mathAwardScreen" class="award-container">
<div class="award-icon" id="mathAwardIcon">üèÜ</div>
<div class="award-title" id="mathAwardTitle">Premiul 1</div>
<div class="final-score" id="mathFinalScoreText">Scor Final: 100</div>
<div class="name-input-group" id="mathNameInputGroup" style="display: none;">
<label for="mathPlayerName">Introdu numele tƒÉu:</label>
<input type="text" id="mathPlayerName" placeholder="Nume..." maxlength="15">
<button class="btn btn-primary" onclick="saveMathScore()">SalveazƒÉ Scorul</button>
</div>
<button class="btn btn-secondary" id="mathCloseAwardBtn" onclick="openMathMenu()" style="display: none;">√énapoi</button>
</div>
<div id="mathLeaderboardScreen" class="leaderboard-container">
<h2 id="mathLeaderboardTitle">Clasament</h2>
<table class="leaderboard-table">
<thead><tr><th>#</th><th>Nume</th><th>Scor</th></tr></thead>
<tbody id="mathLeaderboardBody"></tbody>
</table>
<button class="btn btn-secondary" onclick="openMathMenu()">√énapoi</button>
</div>
</div>

<!-- Interfa»õƒÉ Joc SƒÉrituri -->
<div id="jumpGameContainer">
<canvas id="jumpCanvas"></canvas>
<div id="jumpUI">
<div class="badge">‚≠ê Scor: <span id="jumpScoreVal">0</span></div>
<div class="badge">üö© Sta»õia: <span id="jumpStationVal">0</span>/15</div>
</div>
<div id="jumpMenu">
<h1>Alege Eroul</h1>
<div style="margin-bottom: 20px; display:flex; gap:10px;">
<button class="btn selected" id="jumpBtnGirl" onclick="setJumpChar('girl')">üåü Fata</button>
<button class="btn" id="jumpBtnBoy" onclick="setJumpChar('boy')">ü¶ï BƒÉiat</button>
</div>
<button class="btn" id="jumpStartBtn" onclick="startJumpGame()" style="background:#2ed573; margin-top:20px;">START JOC</button>
<p style="margin-top: 15px; font-size:0.9rem;">ApasƒÉ oriunde pentru a sƒÉri SUS!</p>
<button class="btn btn-secondary" onclick="closeJumpGame()" style="margin-top: 15px;">√énapoi la Meniu</button>
</div>
<div id="jumpWinScreen">
<h1 style="font-size: 2.5rem;">VICTORIE! üèÜ</h1>
<p style="font-size: 1.2rem; color: #fff;">Ai trecut prin toate cele 15 sta»õii!</p>
<button class="btn" onclick="closeJumpGame()" style="background:#fff; color:#2ed573; margin-top:20px;">√énapoi la Meniu</button>
</div>
</div>

<!-- Interfa»õƒÉ Joc Litere -->
<div id="letterGameContainer">
<div class="letter-card-ui">
<canvas id="letterConfetti"></canvas>
<header class="letter-header">
<h1>Jocul Literelor</h1>
<div class="letter-score">Stelu»õe: <span id="letterScore">0</span> ‚≠ê</div>
</header>
<div class="letter-play-area">
<div class="letter-card-display" id="letterTargetCard">
<span id="letterTargetChar">A</span>
<img src="https://image.qwenlm.ai/public_source/9d076338-2b12-4553-8888-4cf6f0866228/173d93ddf-8170-4865-8cf4-97af1e0962e2.png" alt="Mascot" class="letter-mascot-img">
</div>
<div class="letter-canvas-container">
<canvas id="guideCanvas"></canvas>
<canvas id="drawCanvas"></canvas>
<button class="letter-clear-btn" onclick="clearLetterCanvas()" title="»òterge">
<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
</button>
</div>
<button id="letterMainBtn" class="letter-action-btn" onclick="handleLetterAction()">
<span>VerificƒÉ!</span>
</button>
</div>
<div class="letter-feedback-overlay" id="letterFeedback">
<div id="letterFeedbackIcon" style="font-size: 3rem; margin-bottom: 8px;">üéâ</div>
<div id="letterFeedbackText">Bravo!</div>
</div>
<button class="btn btn-secondary" onclick="closeLetterGame()" style="position:absolute; bottom:5px; left:5px; z-index:50; font-size:0.8rem; padding:5px 10px;">Ie»ôire</button>
</div>
</div>

<!-- Interfa»õƒÉ Joc Coordonate -->
<div id="coordGameContainer">
<div class="coord-wrapper">
<h1 class="coord-h1">Joc Coordonate Automate</h1>
<p class="coord-p">Culoarea se selecteazƒÉ singurƒÉ! Tu doar gƒÉse»ôte coordonatele.</p>
<div id="coord-board-wrapper">
<div class="corner-box">X/Y</div>
<div id="axis-x"></div>
<div id="axis-y"></div>
<div id="game-area-coord"></div>
</div>
<div id="status-box">ApasƒÉ "Start Joc"!</div>
<div id="coord-controls">
<div class="color-btn" style="background:#ff0000" data-color="#ff0000"></div>
<div class="color-btn" style="background:#ff8c00" data-color="#ff8c00"></div>
<div class="color-btn" style="background:#ffd700" data-color="#ffd700"></div>
<div class="color-btn" style="background:#008000" data-color="#008000"></div>
<div class="color-btn" style="background:#1e90ff" data-color="#1e90ff"></div>
<div class="color-btn" style="background:#4b0082" data-color="#4b0082"></div>
<div class="color-btn" style="background:#ffffff" data-color="#ffffff"></div>
<button class="action-btn-coord btn-start" onclick="startCoordGame()">Start Joc</button>
<button class="action-btn-coord btn-undo" id="undoBtn" onclick="undoLast()">&larr;</button>
<button class="action-btn-coord btn-clear" onclick="clearGridNow()">»òterge Tot</button>
</div>
<button class="btn btn-secondary" onclick="closeCoordGame()" style="margin-top: 10px; font-size:0.9rem;">√énapoi la Meniu</button>
</div>
</div>

<script>
// ==========================================
// LOGICA GENERALƒÇ & NAVIGARE
// ==========================================
function showMainMenu() {
document.getElementById('mainContainer').style.display = 'block';
document.getElementById('mathContainer').style.display = 'none';
document.getElementById('mathBackBtn').style.display = 'none';
closeJumpGame();
closeLetterGame();
closeCoordGame();
}
function openMathMenu() {
document.getElementById('mainContainer').style.display = 'none';
document.getElementById('mathContainer').style.display = 'block';
document.getElementById('mathBackBtn').style.display = 'flex';
document.getElementById('mathBackBtn').onclick = showMainMenu;
document.getElementById('mathMainMenu').style.display = 'block';
document.getElementById('mathSubMenu').style.display = 'none';
document.getElementById('mathGameArea').style.display = 'none';
document.getElementById('mathAwardScreen').style.display = 'none';
document.getElementById('mathLeaderboardScreen').style.display = 'none';
renderMathMainMenu();
}
function openJumpGame() {
document.getElementById('mainContainer').style.display = 'none';
document.getElementById('mathContainer').style.display = 'none';
document.getElementById('jumpGameContainer').style.display = 'block';
initJumpGame();
}
function closeJumpGame() {
jumpGameRunning = false;
document.getElementById('jumpGameContainer').style.display = 'none';
document.getElementById('jumpMenu').style.display = 'flex';
document.getElementById('jumpWinScreen').style.display = 'none';
}
function openLetterGame() {
document.getElementById('mainContainer').style.display = 'none';
document.getElementById('mathContainer').style.display = 'none';
document.getElementById('letterGameContainer').style.display = 'block';
initLetterGame();
}
function closeLetterGame() {
document.getElementById('letterGameContainer').style.display = 'none';
}
function openCoordGame() {
document.getElementById('mainContainer').style.display = 'none';
document.getElementById('mathContainer').style.display = 'none';
document.getElementById('coordGameContainer').style.display = 'block';
initCoordGame();
}
function closeCoordGame() {
document.getElementById('coordGameContainer').style.display = 'none';
}

// ==========================================
// LOGICA JOC MATEMATIC
// ==========================================
let mathCurrentMode = '';
let mathScore = 100;
let mathCurrentAnswer = 0;
let mathTimeLeft = 0;
let mathMaxTime = 0;
let mathTimerInterval;
let mathDifficultyLevel = 1;
let mathProblemHTML = '';
let mathQuestionCount = 0;
const MAX_QUESTIONS = 20;
let mathCurrentSubMenuKey = '';
let isMathGameEnding = false;
const mathMenus = {
'kg': { title: 'GrƒÉdini»õƒÉ', theme: 'boy', items: [
{ id: 'kg_count', icon: 'üöó', title: 'NumƒÉrƒÉ Obiecte', desc: 'C√¢te ma»ôinu»õe sunt?' },
{ id: 'kg_sequence', icon: 'ü§ñ', title: '»òir Numeric', desc: 'ContinuƒÉ »ôirul (1-10)' },
{ id: 'kg_add', icon: '‚öΩ', title: 'AdunƒÉri Vizuale', desc: 'AdunƒÉ bilele' }
]},
'easy_menu': { title: 'Clasa 1 - 2 (FƒÉrƒÉ Trecere)', theme: 'girl', items: [
{ id: 'easy_math', icon: 'ü¶Ñ', title: 'Calcule', desc: 'AdunƒÉri »ôi scƒÉderi simple' },
{ id: 'easy_seq', icon: 'üî¢', title: '»òiruri Numerice', desc: 'GƒÉse»ôte urmƒÉtorul numƒÉr' },
{ id: 'easy_comp', icon: '‚öñÔ∏è', title: 'Compara»õii', desc: 'Care e mai mare?' }
]},
'max_menu': { title: 'Clasa 1 - 2 (Cu Trecere)', theme: 'girl', items: [
{ id: 'max_math', icon: 'üëë', title: 'Calcule Avansate', desc: 'Cu trecere peste ordin' },
{ id: 'max_seq', icon: 'üß©', title: '»òiruri Complexe', desc: 'Salturi de 2, 5, 10' },
{ id: 'max_eq', icon: '‚ùì', title: 'Ecua»õii Simple', desc: 'GƒÉse»ôte numƒÉrul lipsƒÉ' }
]},
'med_menu': { title: 'Clasa 3 - 4', theme: 'girl', items: [
{ id: 'med_math', icon: 'üå∏', title: '√énmul»õiri & √émpƒÉr»õiri', desc: 'Tabelele √Ænmul»õirii' },
{ id: 'med_round', icon: 'üéØ', title: 'Rotunjiri', desc: 'La zece sau sutƒÉ' },
{ id: 'med_order', icon: 'üìù', title: 'Ordinea Opera»õiilor', desc: 'Calcul cu paranteze' }
]},
'hard_menu': { title: 'Clasa 5+', theme: 'girl', items: [
{ id: 'hard_frac', icon: 'üç∞', title: 'Frac»õii', desc: 'AdunƒÉri cu frac»õii' },
{ id: 'hard_dec', icon: 'üíß', title: 'Zecimale', desc: 'Calcule cu virgulƒÉ' },
{ id: 'hard_pow', icon: '‚ö°', title: 'Puteri & Radicali', desc: 'Calcul avansat' }
]},
'pro_menu': { title: '5 Pro (Avansat)', theme: 'pro', items: [
{ id: 'pro_cong', icon: '‚öõÔ∏è', title: 'Congruen»õe', desc: 'AritmeticƒÉ modularƒÉ (mod n)' },
{ id: 'pro_last', icon: 'üî¢', title: 'Ultima CifrƒÉ', desc: 'DeterminƒÉ ultima cifrƒÉ' },
{ id: 'pro_div', icon: '‚ûó', title: 'Criterii Divizibilitate', desc: 'Restul √ÆmpƒÉr»õirii' }
]}
};

function initMath() {
createBackgroundShapes();
renderMathMainMenu();
document.getElementById('mathAnswerInput').addEventListener("keypress", function(event) {
if (event.key === "Enter") checkMathAnswer();
});
}

function createBackgroundShapes() {
const container = document.getElementById('bg-shapes');
const colors = ['#FFCC80', '#FFAB91', '#FFE082', '#A5D6A7', '#90CAF9'];
for(let i=0; i<12; i++) {
const shape = document.createElement('div');
shape.classList.add('shape');
const size = Math.random() * 60 + 30;
const color = colors[Math.floor(Math.random() * colors.length)];
shape.style.width = `${size}px`;
shape.style.height = `${size}px`;
shape.style.left = `${Math.random() * 100}%`;
shape.style.backgroundColor = color;
shape.style.borderRadius = Math.random() > 0.5 ? '50%' : '15%';
shape.style.animationDuration = `${Math.random() * 10 + 15}s`;
shape.style.animationDelay = `-${Math.random() * 20}s`;
container.appendChild(shape);
}
}

function renderMathMainMenu() {
const grid = document.getElementById('mathMenuGrid');
grid.innerHTML = '';
Object.keys(mathMenus).forEach(key => {
const menuData = mathMenus[key];
const card = document.createElement('div');
card.className = `card ${menuData.theme === 'boy' ? 'kg-card' : (menuData.theme === 'pro' ? 'pro-card' : 'easy-card')}`;
const lbBtn = document.createElement('button');
lbBtn.className = 'card-lb-btn';
lbBtn.innerHTML = 'üèÜ';
lbBtn.title = 'Vezi Clasament';
lbBtn.style.position = 'absolute';
lbBtn.style.top = '5px';
lbBtn.style.right = '5px';
lbBtn.style.background = 'none';
lbBtn.style.border = 'none';
lbBtn.style.fontSize = '1.2rem';
lbBtn.style.cursor = 'pointer';
lbBtn.onclick = (e) => { e.stopPropagation(); showMathLeaderboard(key); };
card.innerHTML = `<div class="card-icon">${menuData.items[0].icon}</div><div style="flex:1;"><div class="card-title">${menuData.title}</div><div class="card-desc">${menuData.items[0].desc}</div></div>`;
card.appendChild(lbBtn);
card.onclick = () => openMathSubmenu(key);
grid.appendChild(card);
});
}

function openMathSubmenu(menuKey) {
mathCurrentSubMenuKey = menuKey;
const menuData = mathMenus[menuKey];
if(!menuData) return;
document.getElementById('mathMainMenu').style.display = 'none';
document.getElementById('mathSubMenu').style.display = 'block';
document.getElementById('mathSubMenuTitle').textContent = menuData.title;
const subGrid = document.getElementById('mathSubMenuGrid');
subGrid.innerHTML = '';
document.body.classList.remove('boy-theme', 'pro-theme');
if(menuData.theme === 'boy') document.body.classList.add('boy-theme');
if(menuData.theme === 'pro') document.body.classList.add('pro-theme');
menuData.items.forEach(item => {
const card = document.createElement('div');
card.className = `card ${menuData.theme === 'boy' ? 'kg-card' : (menuData.theme === 'pro' ? 'pro-card' : 'easy-card')}`;
card.innerHTML = `<div class="card-icon">${item.icon}</div><div style="flex:1;"><div class="card-title">${item.title}</div><div class="card-desc">${item.desc}</div></div>`;
card.onclick = () => startMathGame(item.id);
subGrid.appendChild(card);
});
}

function startMathGame(mode) {
mathCurrentMode = mode;
mathScore = 100;
mathQuestionCount = 0;
mathDifficultyLevel = 1;
isMathGameEnding = false;
updateMathStats();
document.getElementById('mathSubMenu').style.display = 'none';
document.getElementById('mathGameArea').style.display = 'block';
document.getElementById('mathAwardScreen').style.display = 'none';
document.getElementById('mathLeaderboardScreen').style.display = 'none';
const isBoy = mode.startsWith('kg');
const isPro = mode.startsWith('pro');
if(isBoy) {
document.body.classList.add('boy-theme');
document.getElementById('mathChoicesContainer').style.display = 'grid';
document.getElementById('mathInputContainer').style.display = 'none';
} else {
if(isPro) document.body.classList.add('pro-theme');
else document.body.classList.remove('boy-theme', 'pro-theme');
document.getElementById('mathChoicesContainer').style.display = 'none';
document.getElementById('mathInputContainer').style.display = 'flex';
}
nextMathProblem();
if(!isBoy) document.getElementById('mathAnswerInput').focus();
}

function updateMathStats() {
document.getElementById('mathScoreDisplay').textContent = `Scor: ${mathScore}`;
document.getElementById('mathProgressDisplay').textContent = `Exerci»õiul: ${mathQuestionCount + 1}/${MAX_QUESTIONS}`;
}

function startMathTimer(seconds) {
clearInterval(mathTimerInterval);
mathMaxTime = seconds;
mathTimeLeft = seconds;
updateMathTimerVisuals();
mathTimerInterval = setInterval(() => {
mathTimeLeft--;
updateMathTimerVisuals();
if (mathTimeLeft <= 0) { clearInterval(mathTimerInterval); handleMathTimeout(); }
}, 1000);
}

function updateMathTimerVisuals() {
const percentage = (mathTimeLeft / mathMaxTime) * 100;
document.getElementById('mathTimerBar').style.width = `${percentage}%`;
if (percentage > 50) document.getElementById('mathTimerBar').style.backgroundColor = 'var(--success)';
else if (percentage > 20) document.getElementById('mathTimerBar').style.backgroundColor = 'var(--timer-warning)';
else document.getElementById('mathTimerBar').style.backgroundColor = 'var(--timer-danger)';
}

function handleMathTimeout() {
showMathCorrectAnswer(true);
}

function getRandomInt(min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; }

function generateMathChoices(correctAnswer, minVal, maxVal) {
let choices = new Set();
choices.add(correctAnswer);
while(choices.size < 3) {
let offset = getRandomInt(-5, 5);
let wrong = correctAnswer + offset;
if(wrong >= minVal && wrong <= maxVal && wrong !== correctAnswer) choices.add(wrong);
else { let r = getRandomInt(minVal, maxVal); if(r !== correctAnswer) choices.add(r); }
}
return Array.from(choices).sort(() => Math.random() - 0.5);
}

function renderMathChoices(choices) {
const container = document.getElementById('mathChoicesContainer');
container.innerHTML = '';
choices.forEach(val => {
const btn = document.createElement('button');
btn.className = 'choice-btn';
btn.textContent = val;
btn.onclick = () => handleMathChoiceClick(val);
container.appendChild(btn);
});
}

function handleMathChoiceClick(val) {
if(isMathGameEnding) return;
let isCorrect = (val === mathCurrentAnswer);
processMathResult(isCorrect);
}

function checkMathAnswer() {
const isBoy = mathCurrentMode.startsWith('kg');
if(isBoy) return;
if(isMathGameEnding) return;
const userVal = parseFloat(document.getElementById('mathAnswerInput').value);
if (isNaN(userVal)) return;
let isCorrect = false;
if(mathCurrentMode === 'easy_comp') {
isCorrect = (userVal === mathCurrentAnswer);
} else {
isCorrect = (Math.abs(userVal - mathCurrentAnswer) < 0.01);
}
processMathResult(isCorrect);
}

function processMathResult(isCorrect) {
if(isCorrect) {
document.getElementById('mathFeedbackText').textContent = "Bravo! Corect! üéâ";
document.getElementById('mathFeedbackText').className = "feedback correct";
mathDifficultyLevel = 1;
} else {
mathScore -= 5;
updateMathStats();
document.getElementById('mathFeedbackText').textContent = "Gre»ôit! Vezi rƒÉspunsul corect mai sus. üò¢";
document.getElementById('mathFeedbackText').className = "feedback wrong";
mathDifficultyLevel++;
showMathCorrectAnswer(false);
return;
}
if (mathQuestionCount >= MAX_QUESTIONS) {
isMathGameEnding = true;
setTimeout(endMathGame, 1500);
} else {
setTimeout(nextMathProblem, 1500);
}
}

function nextMathProblem() {
if (mathQuestionCount >= MAX_QUESTIONS) { endMathGame(); return; }
mathQuestionCount++;
updateMathStats();
document.getElementById('mathAnswerInput').value = '';
document.getElementById('mathFeedbackText').textContent = '';
document.getElementById('mathFeedbackText').className = 'feedback';
document.getElementById('mathGameContent').innerHTML = '';
document.getElementById('mathChoicesContainer').innerHTML = '';
mathProblemHTML = '';
if (mathCurrentMode.startsWith('kg')) { if (mathDifficultyLevel === 1) startMathTimer(30); else startMathTimer(40); }
else { if (mathDifficultyLevel === 1) startMathTimer(20); else startMathTimer(30); }

// Generare probleme (codul original pƒÉstrat, dar adaptat vizual dacƒÉ e nevoie)
if (mathCurrentMode === 'kg_count') {
const maxCount = mathDifficultyLevel === 1 ? 5 : 10;
const count = getRandomInt(1, maxCount);
mathCurrentAnswer = count;
let html = '<div class="visual-container">';
const icons = ['üöó', '‚öΩ', 'üöÄ', 'ü§ñ', 'üö≤'];
const icon = icons[Math.floor(Math.random() * icons.length)];
for(let i=0; i<count; i++) html += `<div style="font-size: 2.5rem; animation: bounce 2s infinite; animation-delay: ${i*0.1}s">${icon}</div>`;
html += '</div><p style="font-size: 1.1rem; color: #546E7A; font-weight:bold;">C√¢te sunt?</p>';
document.getElementById('mathGameContent').innerHTML = html;
renderMathChoices(generateMathChoices(mathCurrentAnswer, 1, maxCount + 2));
}
else if (mathCurrentMode === 'kg_sequence') {
const start = getRandomInt(0, mathDifficultyLevel === 1 ? 3 : 6);
let sequence = [];
for(let i=0; i<3; i++) sequence.push(start + i);
mathCurrentAnswer = start + 3;
document.getElementById('mathGameContent').innerHTML = `<p style="font-size: 1.1rem; color: #546E7A; font-weight:bold;">CompleteazƒÉ codul:</p><div class="sequence-display">${sequence.join(' , ')} , <span class="missing-number">?</span></div>`;
renderMathChoices(generateMathChoices(mathCurrentAnswer, 0, 10));
}
else if (mathCurrentMode === 'kg_add') {
const maxNum = mathDifficultyLevel === 1 ? 4 : 9;
const n1 = getRandomInt(1, maxNum);
const n2 = getRandomInt(1, maxNum);
mathCurrentAnswer = n1 + n2;
let html = '<div class="visual-container">';
for(let i=0; i<n1; i++) html += `<div style="font-size: 2rem;">‚öΩ</div>`;
html += '<div style="width:15px; font-weight:900; color:#2196F3; font-size:1.2rem;">+</div>';
for(let i=0; i<n2; i++) html += `<div style="font-size: 2rem;">‚öΩ</div>`;
html += '</div>';
document.getElementById('mathGameContent').innerHTML = html + `<div class="problem-display">${n1} + ${n2} = ?</div>`;
renderMathChoices(generateMathChoices(mathCurrentAnswer, 2, maxNum * 2 + 2));
}
else if (mathCurrentMode === 'easy_math') {
const rangeMax = mathDifficultyLevel === 1 ? 50 : 90;
const op = Math.random() > 0.5 ? '+' : '-';
let n1 = getRandomInt(10, rangeMax);
let n2;
if(op === '+') {
let d1_10 = Math.floor(n1 / 10); let d1_1 = n1 % 10;
let d2_10 = getRandomInt(0, 9 - d1_10); let d2_1 = getRandomInt(0, 9 - d1_1);
n2 = (d2_10 * 10) + d2_1; if(n2===0) n2=1;
mathCurrentAnswer = n1 + n2;
} else {
let d1_10 = Math.floor(n1 / 10); let d1_1 = n1 % 10;
let d2_10 = getRandomInt(0, d1_10); let d2_1 = getRandomInt(0, d1_1);
n2 = (d2_10 * 10) + d2_1; if(n2===0) n2=1; if(n2 >= n1) n2 = getRandomInt(1, n1-1);
mathCurrentAnswer = n1 - n2;
}
mathProblemHTML = `<div class="problem-display">${n1} ${op} ${n2} = ?</div>`;
document.getElementById('mathGameContent').innerHTML = mathProblemHTML;
}
else if (mathCurrentMode === 'easy_seq') {
const start = getRandomInt(1, 20);
const step = 1;
let seq = [start, start+step, start+step*2];
mathCurrentAnswer = start + step*3;
mathProblemHTML = `<div class="sequence-display">${seq.join(', ')}, <span class="missing-number">?</span></div>`;
document.getElementById('mathGameContent').innerHTML = mathProblemHTML;
}
else if (mathCurrentMode === 'easy_comp') {
const n1 = getRandomInt(10, 50);
const n2 = getRandomInt(10, 50);
mathCurrentAnswer = n1 > n2 ? 1 : 2;
mathProblemHTML = `<div style="font-size:1.2rem; color:#666;">ComparƒÉ numerele:</div><div class="problem-display">${n1} <span class="missing-number">?</span> ${n2}</div><div style="font-size:1rem; color:#666;">(1 st√¢nga, 2 dreapta)</div>`;
document.getElementById('mathGameContent').innerHTML = mathProblemHTML;
}
else if (mathCurrentMode === 'max_math') {
const op = Math.random() > 0.5 ? '+' : '-';
let n1, n2;
if(op === '+') {
let u1 = getRandomInt(1, 9); let u2 = getRandomInt(10-u1, 9);
let t1 = getRandomInt(1, 8); let t2 = getRandomInt(0, 9-t1);
n1 = t1*10+u1; n2 = t2*10+u2; mathCurrentAnswer = n1+n2;
} else {
let u1 = getRandomInt(0, 8); let u2 = getRandomInt(u1+1, 9);
let t1 = getRandomInt(2, 9); let t2 = getRandomInt(0, t1-1);
n1 = t1*10+u1; n2 = t2*10+u2; mathCurrentAnswer = n1-n2;
}
mathProblemHTML = `<div class="problem-display">${n1} ${op} ${n2} = ?</div>`;
document.getElementById('mathGameContent').innerHTML = mathProblemHTML;
}
else if (mathCurrentMode === 'max_seq') {
const step = mathDifficultyLevel === 1 ? 2 : 5;
const start = getRandomInt(1, 10);
let seq = [start, start+step, start+step*2];
mathCurrentAnswer = start + step*3;
mathProblemHTML = `<div class="sequence-display">${seq.join(', ')}, <span class="missing-number">?</span></div>`;
document.getElementById('mathGameContent').innerHTML = mathProblemHTML;
}
else if (mathCurrentMode === 'max_eq') {
const res = getRandomInt(10, 50);
const add = getRandomInt(1, 9);
mathCurrentAnswer = res - add;
mathProblemHTML = `<div class="problem-display"><span class="missing-number">?</span> + ${add} = ${res}</div>`;
document.getElementById('mathGameContent').innerHTML = mathProblemHTML;
}
else if (mathCurrentMode === 'med_math') {
const n1 = getRandomInt(2, 9);
const n2 = getRandomInt(2, 9);
mathCurrentAnswer = n1 * n2;
mathProblemHTML = `<div class="problem-display">${n1} √ó ${n2} = ?</div>`;
document.getElementById('mathGameContent').innerHTML = mathProblemHTML;
}
else if (mathCurrentMode === 'med_round') {
const num = getRandomInt(15, 985);
const roundTo = mathDifficultyLevel === 1 ? 10 : 100;
mathCurrentAnswer = Math.round(num / roundTo) * roundTo;
mathProblemHTML = `<div style="font-size:1.2rem; color:#666;">Rotunjire la ${roundTo}:</div><div class="problem-display">${num} ‚âà <span class="missing-number">?</span></div>`;
document.getElementById('mathGameContent').innerHTML = mathProblemHTML;
}
else if (mathCurrentMode === 'med_order') {
const a = getRandomInt(2, 5);
const b = getRandomInt(2, 5);
const c = getRandomInt(1, 10);
mathCurrentAnswer = (a + b) * c;
mathProblemHTML = `<div class="problem-display">(${a} + ${b}) √ó ${c} = ?</div>`;
document.getElementById('mathGameContent').innerHTML = mathProblemHTML;
}
else if (mathCurrentMode === 'hard_frac') {
const den = getRandomInt(2, 9);
const n1 = getRandomInt(1, den-1);
const n2 = getRandomInt(1, den-n1);
mathCurrentAnswer = (n1 + n2) / den;
mathProblemHTML = `<div style="font-size:1.2rem; color:#666;">Calcul (zecimal):</div><div class="problem-display">${n1}/${den} + ${n2}/${den} = <span class="missing-number">?</span></div>`;
document.getElementById('mathGameContent').innerHTML = mathProblemHTML;
}
else if (mathCurrentMode === 'hard_dec') {
const n1 = getRandomInt(10, 50) / 10;
const n2 = getRandomInt(10, 50) / 10;
mathCurrentAnswer = n1 + n2;
mathProblemHTML = `<div class="problem-display">${n1} + ${n2} = <span class="missing-number">?</span></div>`;
document.getElementById('mathGameContent').innerHTML = mathProblemHTML;
}
else if (mathCurrentMode === 'hard_pow') {
const base = getRandomInt(2, 5);
const exp = getRandomInt(2, 3);
mathCurrentAnswer = Math.pow(base, exp);
mathProblemHTML = `<div class="problem-display">${base}<sup>${exp}</sup> = <span class="missing-number">?</span></div>`;
document.getElementById('mathGameContent').innerHTML = mathProblemHTML;
}
else if (mathCurrentMode === 'pro_cong') {
const n = mathDifficultyLevel === 1 ? getRandomInt(2, 5) : getRandomInt(6, 12);
const a = getRandomInt(10, 100);
mathCurrentAnswer = a % n;
mathProblemHTML = `<div style="font-size:1.2rem; color:#666;">Congruen»õƒÉ:</div><div class="problem-display">${a} ‚â° <span class="missing-number">?</span> (mod ${n})</div>`;
document.getElementById('mathGameContent').innerHTML = mathProblemHTML;
}
else if (mathCurrentMode === 'pro_last') {
const base = getRandomInt(11, 99);
const exp = getRandomInt(2, 5);
mathCurrentAnswer = Math.pow(base, exp) % 10;
mathProblemHTML = `<div style="font-size:1.2rem; color:#666;">Ultima cifrƒÉ:</div><div class="problem-display">${base}<sup>${exp}</sup> ‚Üí <span class="missing-number">?</span></div>`;
document.getElementById('mathGameContent').innerHTML = mathProblemHTML;
}
else if (mathCurrentMode === 'pro_div') {
const div = mathDifficultyLevel === 1 ? 3 : 7;
const a = getRandomInt(20, 100);
mathCurrentAnswer = a % div;
mathProblemHTML = `<div style="font-size:1.2rem; color:#666;">Restul √ÆmpƒÉr»õirii:</div><div class="problem-display">${a} : ${div} rest <span class="missing-number">?</span></div>`;
document.getElementById('mathGameContent').innerHTML = mathProblemHTML;
}
}

function endMathGame() {
clearInterval(mathTimerInterval);
document.getElementById('mathGameArea').style.display = 'none';
document.getElementById('mathAwardScreen').style.display = 'flex';
document.getElementById('mathFinalScoreText').textContent = `Scor Final: ${mathScore}`;
let icon = '', title = '', titleClass = '', showInput = false;
if (mathScore === 100) { icon = 'üèÜ'; title = 'PREMIUL 1'; titleClass = 'award-gold'; showInput = true; }
else if (mathScore === 95) { icon = 'ü•à'; title = 'PREMIUL 2'; titleClass = 'award-silver'; showInput = true; }
else if (mathScore === 90) { icon = 'ü•â'; title = 'PREMIUL 3'; titleClass = 'award-bronze'; showInput = true; }
else if (mathScore >= 70 && mathScore <= 85) { icon = 'üéñÔ∏è'; title = 'MEN»öIUNE'; titleClass = 'award-mention'; showInput = true; }
else { icon = 'üí™'; title = '√éNCEARCƒÇ DIN NOU'; titleClass = 'award-try'; showInput = false; }
document.getElementById('mathAwardIcon').textContent = icon;
document.getElementById('mathAwardTitle').textContent = title;
document.getElementById('mathAwardTitle').className = 'award-title ' + titleClass;
if(showInput) { document.getElementById('mathNameInputGroup').style.display = 'flex'; document.getElementById('mathCloseAwardBtn').style.display = 'none'; document.getElementById('mathPlayerName').value = ''; document.getElementById('mathPlayerName').focus(); }
else { document.getElementById('mathNameInputGroup').style.display = 'none'; document.getElementById('mathCloseAwardBtn').style.display = 'inline-block'; }
}

function saveMathScore() {
const name = document.getElementById('mathPlayerName').value.trim() || "Anonim";
const leaderboardKey = `math_leaderboard_${mathCurrentMode}`;
try {
let scores = JSON.parse(localStorage.getItem(leaderboardKey) || "[]");
scores.push({ name: name, score: mathScore, date: new Date().toLocaleDateString() });
scores.sort((a, b) => b.score - a.score);
scores = scores.slice(0, 10);
localStorage.setItem(leaderboardKey, JSON.stringify(scores));
document.getElementById('mathNameInputGroup').style.display = 'none';
document.getElementById('mathCloseAwardBtn').style.display = 'inline-block';
} catch (e) {
console.error("Eroare la salvarea scorului:", e);
alert("A apƒÉrut o eroare la salvarea scorului.");
}
}

function showMathLeaderboard(categoryKey) {
const key = categoryKey || mathCurrentSubMenuKey;
const menuData = mathMenus[key];
if (!menuData) return;
document.getElementById('mathGameArea').style.display = 'none';
document.getElementById('mathAwardScreen').style.display = 'none';
document.getElementById('mathSubMenu').style.display = 'none';
document.getElementById('mathMainMenu').style.display = 'none';
document.getElementById('mathLeaderboardScreen').style.display = 'flex';
document.getElementById('mathBackBtn').style.display = 'flex';
document.getElementById('mathBackBtn').onclick = () => { document.getElementById('mathLeaderboardScreen').style.display = 'none'; if(categoryKey) document.getElementById('mathMainMenu').style.display = 'block'; else document.getElementById('mathSubMenu').style.display = 'block'; };
document.getElementById('mathLeaderboardTitle').textContent = `Clasament: ${menuData.title}`;
let allScores = [];
if (menuData.items && Array.isArray(menuData.items)) {
menuData.items.forEach(item => {
try {
const itemKey = `math_leaderboard_${item.id}`;
const itemScores = JSON.parse(localStorage.getItem(itemKey) || "[]");
allScores = allScores.concat(itemScores);
} catch (e) { console.warn(`Eroare la citirea scorurilor pentru ${item.id}:`, e); }
});
}
allScores.sort((a, b) => b.score - a.score);
allScores = allScores.slice(0, 10);
const tbody = document.getElementById('mathLeaderboardBody');
tbody.innerHTML = '';
if(allScores.length === 0) { tbody.innerHTML = '<tr><td colspan="3">Nu existƒÉ √ÆncƒÉ scoruri.</td></tr>'; }
else {
allScores.forEach((entry, index) => {
const row = `<tr><td>${index + 1}</td><td>${entry.name}</td><td>${entry.score}</td></tr>`;
tbody.innerHTML += row;
});
}
}

function showMathCorrectAnswer(isTimeout) {
if(mathProblemHTML) {
const correctedHTML = mathProblemHTML.replace(
/<span class="missing-number">\?<\/span>/g,
`<span style="color:var(--success); font-weight:900; border-bottom: 3px solid var(--success);">${mathCurrentAnswer}</span>`
);
document.getElementById('mathGameContent').innerHTML = correctedHTML;
}
if(isTimeout) {
document.getElementById('mathFeedbackText').innerHTML = `Timp expirat! <br>RƒÉspunsul corect este <strong>${mathCurrentAnswer}</strong>. (-5 puncte)`;
} else {
document.getElementById('mathFeedbackText').innerHTML = `Gre»ôit! <br>RƒÉspunsul corect este <strong>${mathCurrentAnswer}</strong>. (-5 puncte)`;
}
document.getElementById('mathFeedbackText').className = "feedback wrong";
mathScore -= 5;
updateMathStats();
mathDifficultyLevel++;
document.getElementById('mathAnswerInput').value = '';
if (mathQuestionCount >= MAX_QUESTIONS) {
isMathGameEnding = true;
setTimeout(endMathGame, 3000);
} else {
setTimeout(nextMathProblem, 3000);
}
}

// ==========================================
// LOGICA JOC SƒÇRITURI
// ==========================================
const jumpCanvas = document.getElementById('jumpCanvas');
const jumpCtx = jumpCanvas.getContext('2d');
const jumpScoreEl = document.getElementById('jumpScoreVal');
const jumpStationEl = document.getElementById('jumpStationVal');
const jumpMenu = document.getElementById('jumpMenu');
const jumpWinScreen = document.getElementById('jumpWinScreen');
const jumpBtnGirl = document.getElementById('jumpBtnGirl');
const jumpBtnBoy = document.getElementById('jumpBtnBoy');
let jumpGameRunning = false;
let jumpScore = 0;
let jumpStation = 0;
const maxStations = 15;
let jumpFrame = 0;
let jumpSpeed = 6;
let jumpCharType = 'girl';
const jumpGravity = 0.5;
const jumpPower = -