<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Joc SÄƒrituri</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #222;
            font-family: 'Arial', sans-serif;
            touch-action: none; /* BlocheazÄƒ zoom-ul */
            user-select: none;
        }
        canvas {
            display: block;
            width: 100%;
            height: 100%;
        }
        #ui {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px #000;
            z-index: 10;
            pointer-events: none;
        }
        #menu {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            z-index: 20;
        }
        .btn {
            padding: 20px 40px;
            font-size: 24px;
            margin: 15px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            background: #ff9a9e;
            color: white;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: transform 0.1s;
        }
        .btn:active { transform: scale(0.95); }
        .btn.selected {
            background: #fff;
            color: #ff9a9e;
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(255,255,255,0.5);
        }
        .hidden { display: none !important; }
        h1 { font-size: 36px; margin-bottom: 30px; text-align: center; color: #fff; }
        p { color: #ccc; font-size: 18px; margin-top: 20px; }
    </style>
</head>
<body>

    <div id="ui">Scor: <span id="scoreVal">0</span></div>
    
    <div id="menu">
        <h1>Alege Personajul</h1>
        <div>
            <button class="btn selected" id="btnGirl" onclick="pick('girl')">ðŸŒŸ Fata</button>
            <button class="btn" id="btnBoy" onclick="pick('boy')">ðŸ¦• BÄƒiat</button>
        </div>
        <button class="btn" id="startBtn" onclick="startGame()" style="background:#2ed573; margin-top:30px;">START JOC</button>
        <p>ApasÄƒ oriunde pe ecran pentru a sÄƒri SUS!</p>
    </div>

    <canvas id="gameCanvas"></canvas>

    <script>
        // --- CONFIGURARE ---
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreEl = document.getElementById('scoreVal');
        const menu = document.getElementById('menu');
        const btnGirl = document.getElementById('btnGirl');
        const btnBoy = document.getElementById('btnBoy');
        const startBtn = document.getElementById('startBtn');
        const title = document.querySelector('#menu h1');

        let w, h;
        let gameRunning = false;
        let score = 0;
        let frame = 0;
        let speed = 6;
        let charType = 'girl';

        // SetÄƒri fizicÄƒ (SÄƒriturÄƒ FOARTE ÃŽNALTÄ‚)
        const gravity = 0.5;
        const jumpPower = -20; // Valoare mare pentru sÄƒriturÄƒ Ã®naltÄƒ
        const groundH = 100;

        const player = {
            x: 100, y: 0, size: 80, dy: 0, angle: 0, grounded: false
        };

        let obstacles = [];

        // Redimensionare automatÄƒ
        function resize() {
            w = window.innerWidth;
            h = window.innerHeight;
            canvas.width = w;
            canvas.height = h;
            if(!gameRunning) {
                player.y = h - groundH - player.size;
                player.x = w * 0.15;
                draw();
            } else {
                player.x = w * 0.15;
            }
        }
        window.addEventListener('resize', resize);
        resize();

        // Selectare personaj
        window.pick = function(type) {
            charType = type;
            if(type === 'girl') {
                btnGirl.classList.add('selected');
                btnBoy.classList.remove('selected');
            } else {
                btnBoy.classList.add('selected');
                btnGirl.classList.remove('selected');
            }
        };

        // Start Joc
        window.startGame = function() {
            menu.classList.add('hidden');
            gameRunning = true;
            score = 0;
            speed = 6;
            frame = 0;
            obstacles = [];
            player.y = h - groundH - player.size;
            player.dy = 0;
            player.angle = 0;
            scoreEl.innerText = score;
            loop();
        };

        // FuncÈ›ia de sÄƒriturÄƒ
        function jump() {
            if (!gameRunning) return;
            // Sare doar dacÄƒ e aproape de sol
            if (player.grounded || player.y > h - groundH - player.size - 10) {
                player.dy = jumpPower;
                player.grounded = false;
            }
        }

        // Controale universale (Touch, Mouse, TastaturÄƒ)
        // Folosim 'pointerdown' care merge peste tot
        window.addEventListener('pointerdown', function(e) {
            // IgnorÄƒm click-urile pe butoanele din meniu dacÄƒ jocul nu ruleazÄƒ
            if(e.target.tagName === 'BUTTON') return;
            jump();
        });

        window.addEventListener('keydown', function(e) {
            if ((e.code === 'Space' || e.code === 'ArrowUp') && gameRunning) {
                jump();
            }
        });

        // Bucla jocului
        function loop() {
            if (!gameRunning) return;
            requestAnimationFrame(loop);
            frame++;

            update();
            draw();
        }

        function update() {
            // FizicÄƒ
            player.dy += gravity;
            player.y += player.dy;

            // Sol
            if (player.y + player.size > h - groundH) {
                player.y = h - groundH - player.size;
                player.dy = 0;
                player.grounded = true;
                player.angle = 0;
            } else {
                player.grounded = false;
                player.angle += 0.1; // Rotire Ã®n aer
            }

            // Obstacole
            if (frame % Math.floor(1000 / speed) === 0) {
                let oh = 40 + Math.random() * 40;
                obstacles.push({ x: w, y: h - groundH - oh, w: 40, h: oh, passed: false });
            }

            for (let i = 0; i < obstacles.length; i++) {
                let o = obstacles[i];
                o.x -= speed;

                // Coliziune
                if (player.x < o.x + o.w && player.x + player.size > o.x &&
                    player.y < o.y + o.h && player.y + player.size > o.y) {
                    gameOver();
                }

                // Scor
                if (o.x + o.w < player.x && !o.passed) {
                    score++;
                    scoreEl.innerText = score;
                    o.passed = true;
                    if(score % 5 === 0) speed += 0.5;
                }
            }

            if (obstacles.length > 0 && obstacles[0].x < -50) obstacles.shift();
        }

        function draw() {
            // Fundal
            let grad = ctx.createLinearGradient(0, 0, 0, h);
            if(charType === 'girl') {
                grad.addColorStop(0, "#ff9a9e"); grad.addColorStop(1, "#fecfef");
            } else {
                grad.addColorStop(0, "#4facfe"); grad.addColorStop(1, "#00f2fe");
            }
            ctx.fillStyle = grad;
            ctx.fillRect(0, 0, w, h);

            // Sol
            ctx.fillStyle = "#6ab04c";
            ctx.fillRect(0, h - groundH, w, groundH);
            ctx.fillStyle = "#badc58";
            ctx.fillRect(0, h - groundH, w, 10);

            // Obstacole
            ctx.fillStyle = "#ff4757";
            obstacles.forEach(o => {
                ctx.beginPath();
                ctx.moveTo(o.x, o.y + o.h);
                ctx.lineTo(o.x + o.w/2, o.y);
                ctx.lineTo(o.x + o.w, o.y + o.h);
                ctx.fill();
            });

            // Player
            ctx.save();
            ctx.translate(player.x + player.size/2, player.y + player.size/2);
            ctx.rotate(player.angle);
            ctx.font = player.size + "px Arial";
            ctx.textAlign = "center";
            ctx.textBaseline = "middle";
            ctx.fillText(charType === 'girl' ? "ðŸŒŸ" : "ðŸ¦•", 0, 0);
            ctx.restore();
        }

        function gameOver() {
            gameRunning = false;
            menu.classList.remove('hidden');
            title.innerText = "Joc Terminat!\nScor: " + score;
            startBtn.innerText = "JoacÄƒ Din Nou";
        }
    </script>
</body>
</html>

