<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Joc MatematicƒÉ: Multiple Choice & Input</title>
    <style>
        :root {
            /* BOY THEME (Kindergarten) */
            --boy-bg: #E3F2FD;
            --boy-primary: #2196F3;
            --boy-secondary: #4FC3F7;
            --boy-accent: #4CAF50;
            
            /* GIRL THEME (School) */
            --girl-bg: #FCE4EC;
            --girl-primary: #EC407A;
            --girl-secondary: #F48FB1;
            --girl-accent: #AB47BC;
            
            /* Shared */
            --text-color: #455A64;
            --card-bg: #FFFFFF;
            --success: #66BB6A;
            --error: #EF5350;
            --timer-warning: #FF9800;
            --timer-danger: #F44336;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Comic Sans MS', 'Chalkboard SE', sans-serif;
            user-select: none; /* Prevent text selection for game feel */
        }

        body {
            background-color: var(--girl-bg);
            background-image: radial-gradient(#F8BBD0 15%, transparent 16%), radial-gradient(#F8BBD0 15%, transparent 16%);
            background-size: 60px 60px;
            background-position: 0 0, 30px 30px;
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
            transition: background 0.5s ease;
        }

        body.boy-theme {
            background-color: var(--boy-bg);
            background-image: radial-gradient(#BBDEFB 15%, transparent 16%), radial-gradient(#BBDEFB 15%, transparent 16%);
        }

        .background-shapes {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
            pointer-events: none;
        }

        .shape {
            position: absolute;
            opacity: 0.4;
            animation: float 15s infinite linear;
        }

        @keyframes float {
            0% { transform: translateY(100vh) rotate(0deg); }
            100% { transform: translateY(-100px) rotate(360deg); }
        }

        .container {
            width: 90%;
            max-width: 900px;
            text-align: center;
            padding: 2rem;
        }

        h1 {
            font-size: 2.8rem;
            margin-bottom: 2rem;
            color: var(--girl-primary);
            text-shadow: 2px 2px 0px #FFF;
            transition: color 0.5s;
        }

        body.boy-theme h1 { color: var(--boy-primary); }
        body.boy-theme h2 { color: var(--boy-primary); }
        h2 { margin-bottom: 1.5rem; font-size: 2rem; }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 1.5rem;
            width: 100%;
        }

        .card {
            background: var(--card-bg);
            border-radius: 25px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 8px 0 rgba(0,0,0,0.1);
            border: 4px solid #FFF;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 200px;
        }

        .card:hover {
            transform: translateY(-8px) scale(1.03);
            box-shadow: 0 15px 0 rgba(0,0,0,0.1);
        }

        .card.kg-card { border-bottom: 6px solid var(--boy-accent); }
        .card.easy-card { border-bottom: 6px solid var(--girl-secondary); }
        .card.max-card { border-bottom: 6px solid var(--girl-primary); }
        .card.med-card { border-bottom: 6px solid var(--girl-accent); }
        .card.hard-card { border-bottom: 6px solid var(--girl-primary); }

        .card-icon { font-size: 3.5rem; margin-bottom: 1rem; }
        .card-title { font-weight: 900; font-size: 1.4rem; color: var(--text-color); margin-bottom: 0.5rem; }
        .card-desc { font-size: 0.9rem; color: #78909C; line-height: 1.4; font-weight: 600; }

        .game-area {
            display: none;
            background: var(--card-bg);
            border-radius: 30px;
            padding: 2.5rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 600px;
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 5px solid var(--girl-secondary);
            transition: border-color 0.5s;
        }

        body.boy-theme .game-area { border-color: var(--boy-secondary); }

        @keyframes popIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        .stats-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            font-size: 1.3rem;
            font-weight: 800;
            color: var(--girl-primary);
            background: #F8BBD0;
            padding: 10px 20px;
            border-radius: 50px;
            transition: all 0.5s;
        }

        body.boy-theme .stats-bar {
            color: var(--boy-primary);
            background: #BBDEFB;
        }

        .timer-container {
            width: 100%;
            height: 15px;
            background-color: #eee;
            border-radius: 10px;
            margin-bottom: 1.5rem;
            overflow: hidden;
            border: 2px solid #ddd;
        }

        .timer-bar {
            height: 100%;
            width: 100%;
            background-color: var(--success);
            transition: width 1s linear, background-color 0.5s;
        }

        .visual-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            min-height: 80px;
            align-items: center;
        }

        .ball {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            box-shadow: inset -3px -3px 10px rgba(0,0,0,0.1), 3px 3px 5px rgba(0,0,0,0.15);
            animation: bounce 2s infinite ease-in-out;
            border: 2px solid rgba(255,255,255,0.3);
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-12px); }
        }

        .sequence-display {
            font-size: 3.5rem;
            font-weight: 900;
            letter-spacing: 5px;
            color: var(--text-color);
            margin: 20px 0;
        }

        .missing-number {
            color: var(--girl-primary);
            border-bottom: 4px dashed var(--girl-primary);
            padding: 0 10px;
        }

        body.boy-theme .missing-number {
            color: var(--boy-primary);
            border-bottom-color: var(--boy-primary);
        }

        .problem-display {
            font-size: 4rem;
            font-weight: 900;
            margin: 1rem 0;
            color: var(--girl-primary);
            transition: color 0.5s;
        }

        body.boy-theme .problem-display { color: var(--boy-primary); }

        /* Input Styles (School) */
        .input-group {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-bottom: 1.5rem;
        }

        input[type="number"] {
            width: 130px;
            padding: 0.8rem;
            font-size: 2.2rem;
            text-align: center;
            border: 3px solid var(--girl-secondary);
            border-radius: 20px;
            outline: none;
            transition: all 0.3s;
            font-family: inherit;
            color: var(--text-color);
            background: #FFF;
        }

        body.boy-theme input[type="number"] { border-color: var(--boy-secondary); }

        input[type="number"]:focus {
            border-color: var(--girl-primary);
            transform: scale(1.05);
        }

        body.boy-theme input[type="number"]:focus { border-color: var(--boy-primary); }

        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        input[type=number] { -moz-appearance: textfield; }

        /* Multiple Choice Styles (Kindergarten) */
        .choices-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-top: 2rem;
        }

        .choice-btn {
            background: white;
            border: 4px solid var(--boy-secondary);
            border-radius: 20px;
            padding: 1.5rem;
            font-size: 2rem;
            font-weight: 900;
            color: var(--boy-primary);
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 6px 0 #0277BD;
            font-family: inherit;
        }

        .choice-btn:active {
            transform: translateY(6px);
            box-shadow: none;
        }

        .choice-btn:hover {
            background: #E1F5FE;
        }

        .btn {
            padding: 1rem 2rem;
            font-size: 1.3rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 900;
            transition: all 0.2s;
            color: white;
            font-family: inherit;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 5px 0 rgba(0,0,0,0.1);
        }

        .btn:active { transform: translateY(4px); box-shadow: none; }

        .btn-primary { 
            background-color: var(--girl-primary); 
            box-shadow: 0 5px 0 #C2185B;
            transition: background 0.5s, box-shadow 0.5s;
        }

        body.boy-theme .btn-primary {
            background-color: var(--boy-primary);
            box-shadow: 0 5px 0 #1565C0;
        }
        
        .btn-secondary { 
            background-color: #B0BEC5; 
            box-shadow: 0 5px 0 #78909C; 
            margin-top: 1rem; 
            font-size: 1rem;
            padding: 0.8rem 1.5rem;
        }

        .feedback {
            height: 2.5rem;
            margin-top: 1rem;
            font-weight: 900;
            font-size: 1.5rem;
        }
        .feedback.correct { color: var(--success); }
        .feedback.wrong { color: var(--error); }

        .back-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: white;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 900;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 10;
            font-family: inherit;
            color: var(--girl-primary);
            transition: all 0.5s;
        }

        body.boy-theme .back-btn { color: var(--boy-primary); }
        .back-btn:hover { transform: scale(1.1); }

        @media (max-width: 600px) {
            h1 { font-size: 2rem; }
            .problem-display { font-size: 3rem; }
            .menu-grid { grid-template-columns: 1fr; }
            .card { min-height: 160px; }
            .choices-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <div class="background-shapes" id="bg-shapes"></div>

    <button class="back-btn" id="backBtn" style="display: none;" onclick="showMenu()">
        ‚Üê √énapoi
    </button>

    <div class="container">
        
        <!-- MAIN MENU -->
        <div id="mainMenu">
            <h1>Jocuri Matematice</h1>
            <div class="menu-grid">
                <div class="card kg-card" onclick="openSubmenu('kg')">
                    <div class="card-icon">üöÄ</div>
                    <div class="card-title">GrƒÉdini»õƒÉ</div>
                    <div class="card-desc">NumƒÉrat, Ma»ôinu»õe »ôi Robo»õei</div>
                </div>
                <div class="card easy-card" onclick="startGame('easy')">
                    <div class="card-icon">ü¶Ñ</div>
                    <div class="card-title">1 - 2 cls</div>
                    <div class="card-desc">AdunƒÉri/scƒÉderi FƒÇRƒÇ trecere peste ordin</div>
                </div>
                <div class="card max-card" onclick="startGame('max')">
                    <div class="card-icon">üëë</div>
                    <div class="card-title">1 - 2 max</div>
                    <div class="card-desc">AdunƒÉri/scƒÉderi CU trecere peste ordin</div>
                </div>
                <div class="card med-card" onclick="startGame('medium')">
                    <div class="card-icon">üå∏</div>
                    <div class="card-title">Clasa 3 - 4</div>
                    <div class="card-desc">√énmul»õiri »ôi √ÆmpƒÉr»õiri</div>
                </div>
                <div class="card hard-card" onclick="startGame('hard')">
                    <div class="card-icon">‚≠ê</div>
                    <div class="card-title">Clasa 5+</div>
                    <div class="card-desc">Probleme complexe</div>
                </div>
            </div>
        </div>

        <!-- KINDERGARTEN SUB-MENU -->
        <div id="kgSubMenu" style="display: none;">
            <h2>Alege activitatea:</h2>
            <div class="menu-grid">
                <div class="card kg-card" onclick="startGame('kg_count')">
                    <div class="card-icon">üöó</div>
                    <div class="card-title">NumƒÉrƒÉ Ma»ôinu»õele</div>
                    <div class="card-desc">C√¢te ma»ôinu»õe sunt?</div>
                </div>
                <div class="card kg-card" onclick="startGame('kg_sequence')">
                    <div class="card-icon">ü§ñ</div>
                    <div class="card-title">Codul Robotului</div>
                    <div class="card-desc">ContinuƒÉ »ôirul numeric</div>
                </div>
                <div class="card kg-card" onclick="startGame('kg_add')">
                    <div class="card-icon">‚öΩ</div>
                    <div class="card-title">Goluri la PoartƒÉ</div>
                    <div class="card-desc">AdunƒÉri mici (sub 5)</div>
                </div>
            </div>
            <button class="btn btn-secondary" onclick="showMenu()" style="margin-top: 2rem;">√énapoi la Meniu</button>
        </div>

        <!-- GAME AREA -->
        <div id="gameArea" class="game-area">
            <div class="stats-bar">
                <span id="scoreDisplay">Puncte: 0 üèÜ</span>
                <span id="timeText">Timp: 0s</span>
            </div>
            
            <div class="timer-container">
                <div class="timer-bar" id="timerBar"></div>
            </div>

            <div id="gameContent"></div>

            <!-- Container for Multiple Choice (Kindergarten) -->
            <div id="choicesContainer" class="choices-grid" style="display: none;"></div>

            <!-- Container for Text Input (School) -->
            <div id="inputContainer" class="input-group" style="display: none;">
                <input type="number" id="answerInput" placeholder="?" autocomplete="off">
                <button class="btn btn-primary" onclick="checkAnswer()">VerificƒÉ</button>
            </div>

            <div class="feedback" id="feedbackText"></div>
            <button class="btn btn-secondary" onclick="showMenu()">Ie»ôire</button>
        </div>

    </div>

    <script>
        // --- Game State ---
        let currentMode = '';
        let score = 0;
        let currentAnswer = 0;
        let timeLeft = 0;
        let maxTime = 0;
        let timerInterval;
        let difficultyLevel = 1; 

        // --- DOM Elements ---
        const mainMenu = document.getElementById('mainMenu');
        const kgSubMenu = document.getElementById('kgSubMenu');
        const gameArea = document.getElementById('gameArea');
        const backBtn = document.getElementById('backBtn');
        const gameContent = document.getElementById('gameContent');
        const answerInput = document.getElementById('answerInput');
        const feedbackText = document.getElementById('feedbackText');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const timeText = document.getElementById('timeText');
        const timerBar = document.getElementById('timerBar');
        const choicesContainer = document.getElementById('choicesContainer');
        const inputContainer = document.getElementById('inputContainer');
        const body = document.body;

        function init() {
            createBackgroundShapes();
            answerInput.addEventListener("keypress", function(event) {
                if (event.key === "Enter") checkAnswer();
            });
        }

        function createBackgroundShapes() {
            const container = document.getElementById('bg-shapes');
            const colors = ['#FFCC80', '#FFAB91', '#FFE082', '#A5D6A7', '#90CAF9'];
            for(let i=0; i<12; i++) {
                const shape = document.createElement('div');
                shape.classList.add('shape');
                const size = Math.random() * 60 + 30;
                const color = colors[Math.floor(Math.random() * colors.length)];
                shape.style.width = `${size}px`;
                shape.style.height = `${size}px`;
                shape.style.left = `${Math.random() * 100}%`;
                shape.style.backgroundColor = color;
                shape.style.borderRadius = Math.random() > 0.5 ? '50%' : '15%';
                shape.style.animationDuration = `${Math.random() * 10 + 15}s`;
                shape.style.animationDelay = `-${Math.random() * 20}s`;
                container.appendChild(shape);
            }
        }

        function showMenu() {
            clearInterval(timerInterval);
            mainMenu.style.display = 'block';
            kgSubMenu.style.display = 'none';
            gameArea.style.display = 'none';
            backBtn.style.display = 'none';
            answerInput.value = '';
            body.classList.remove('boy-theme');
        }

        function openSubmenu(type) {
            if(type === 'kg') {
                mainMenu.style.display = 'none';
                kgSubMenu.style.display = 'block';
                backBtn.style.display = 'flex';
                backBtn.onclick = showMenu;
                body.classList.add('boy-theme');
            }
        }

        function startGame(mode) {
            currentMode = mode;
            score = 0;
            difficultyLevel = 1;
            scoreDisplay.textContent = `Puncte: 0 üèÜ`;
            
            mainMenu.style.display = 'none';
            kgSubMenu.style.display = 'none';
            gameArea.style.display = 'block';
            backBtn.style.display = 'flex';
            
            if(mode.startsWith('kg')) {
                body.classList.add('boy-theme');
                // Show Multiple Choice, Hide Input
                choicesContainer.style.display = 'grid';
                inputContainer.style.display = 'none';
                
                backBtn.onclick = () => {
                    clearInterval(timerInterval);
                    gameArea.style.display = 'none';
                    kgSubMenu.style.display = 'block';
                };
            } else {
                body.classList.remove('boy-theme');
                // Hide Multiple Choice, Show Input
                choicesContainer.style.display = 'none';
                inputContainer.style.display = 'flex';
                
                backBtn.onclick = showMenu;
            }

            nextProblem();
            if(!mode.startsWith('kg')) answerInput.focus();
        }

        function startTimer(seconds) {
            clearInterval(timerInterval);
            maxTime = seconds;
            timeLeft = seconds;
            updateTimerVisuals();

            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerVisuals();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    handleTimeout();
                }
            }, 1000);
        }

        function updateTimerVisuals() {
            timeText.textContent = `Timp: ${timeLeft}s`;
            const percentage = (timeLeft / maxTime) * 100;
            timerBar.style.width = `${percentage}%`;
            
            if (percentage > 50) {
                timerBar.style.backgroundColor = 'var(--success)';
            } else if (percentage > 20) {
                timerBar.style.backgroundColor = 'var(--timer-warning)';
            } else {
                timerBar.style.backgroundColor = 'var(--timer-danger)';
            }
        }

        function handleTimeout() {
            feedbackText.textContent = "Timpul a expirat! üò¢";
            feedbackText.className = "feedback wrong";
            difficultyLevel++; 
            setTimeout(nextProblem, 2000);
        }

        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function generateChoices(correctAnswer, minVal, maxVal) {
            let choices = new Set();
            choices.add(correctAnswer);
            
            while(choices.size < 3) {
                let offset = getRandomInt(-3, 3);
                let wrong = correctAnswer + offset;
                if(wrong >= minVal && wrong <= maxVal && wrong !== correctAnswer) {
                    choices.add(wrong);
                } else {
                    // Fallback random if offset goes out of bounds
                    let r = getRandomInt(minVal, maxVal);
                    if(r !== correctAnswer) choices.add(r);
                }
            }
            
            // Convert to array and shuffle
            return Array.from(choices).sort(() => Math.random() - 0.5);
        }

        function renderChoices(choices) {
            choicesContainer.innerHTML = '';
            choices.forEach(val => {
                const btn = document.createElement('button');
                btn.className = 'choice-btn';
                btn.textContent = val;
                btn.onclick = () => handleChoiceClick(val);
                choicesContainer.appendChild(btn);
            });
        }

        function handleChoiceClick(val) {
            if(val === currentAnswer) {
                score++;
                scoreDisplay.textContent = `Puncte: ${score} üèÜ`;
                feedbackText.textContent = "Bravo! E»ôti campion! üéâ";
                feedbackText.className = "feedback correct";
                difficultyLevel = 1;
                setTimeout(nextProblem, 1500);
            } else {
                feedbackText.textContent = "Oops! Mai √ÆncearcƒÉ. (Dificultate crescutƒÉ) üòä";
                feedbackText.className = "feedback wrong";
                difficultyLevel++;
                setTimeout(nextProblem, 1500);
            }
        }

        function nextProblem() {
            answerInput.value = '';
            feedbackText.textContent = '';
            feedbackText.className = 'feedback';
            gameContent.innerHTML = '';
            choicesContainer.innerHTML = '';

            // Timer Logic
            if (currentMode.startsWith('kg')) {
                if (difficultyLevel === 1) startTimer(30);
                else startTimer(40);
            } else {
                if (difficultyLevel === 1) startTimer(20);
                else startTimer(30);
            }

            // Problem Generation
            if (currentMode === 'kg_count') {
                const maxCount = difficultyLevel === 1 ? 5 : 10;
                const count = getRandomInt(1, maxCount);
                currentAnswer = count;
                let html = '<div class="visual-container">';
                const icons = ['üöó', '‚öΩ', 'üöÄ', 'ü§ñ', 'üö≤'];
                const icon = icons[Math.floor(Math.random() * icons.length)];
                for(let i=0; i<count; i++) {
                    html += `<div style="font-size: 3rem; animation: bounce 2s infinite; animation-delay: ${i*0.1}s">${icon}</div>`;
                }
                html += '</div><p style="font-size: 1.3rem; color: #546E7A; font-weight:bold;">C√¢te sunt?</p>';
                gameContent.innerHTML = html;
                renderChoices(generateChoices(currentAnswer, 1, maxCount + 2));

            } else if (currentMode === 'kg_sequence') {
                const start = getRandomInt(0, difficultyLevel === 1 ? 3 : 6);
                const length = 3;
                let sequence = [];
                for(let i=0; i<length; i++) sequence.push(start + i);
                currentAnswer = start + length;
                let displaySeq = sequence.join(' , ');
                gameContent.innerHTML = `<p style="font-size: 1.3rem; color: #546E7A; font-weight:bold;">CompleteazƒÉ codul:</p><div class="sequence-display">${displaySeq} , <span class="missing-number">?</span></div>`;
                renderChoices(generateChoices(currentAnswer, 0, 10));

            } else if (currentMode === 'kg_add') {
                const maxNum = difficultyLevel === 1 ? 4 : 9;
                const n1 = getRandomInt(1, maxNum);
                const n2 = getRandomInt(1, maxNum);
                currentAnswer = n1 + n2;
                let html = '<div class="visual-container">';
                for(let i=0; i<n1; i++) html += `<div style="font-size: 2.5rem;">‚öΩ</div>`;
                html += '<div style="width:20px; font-weight:900; color:#2196F3; font-size:1.5rem;">+</div>';
                for(let i=0; i<n2; i++) html += `<div style="font-size: 2.5rem;">‚öΩ</div>`;
                html += '</div>';
                gameContent.innerHTML = html + `<div class="problem-display">${n1} + ${n2} = ?</div>`;
                renderChoices(generateChoices(currentAnswer, 2, maxNum * 2 + 2));

            } else if (currentMode === 'easy') {
                const rangeMax = difficultyLevel === 1 ? 50 : 90;
                const op = Math.random() > 0.5 ? '+' : '-';
                let n1 = getRandomInt(10, rangeMax);
                let n2;

                if(op === '+') {
                    let d1_10 = Math.floor(n1 / 10);
                    let d1_1 = n1 % 10;
                    let d2_10 = getRandomInt(0, 9 - d1_10);
                    let d2_1 = getRandomInt(0, 9 - d1_1);
                    n2 = (d2_10 * 10) + d2_1;
                    if(n2===0) n2=1;
                    currentAnswer = n1 + n2;
                    gameContent.innerHTML = `<div class="problem-display">${n1} + ${n2} = ?</div>`;
                } else {
                    let d1_10 = Math.floor(n1 / 10);
                    let d1_1 = n1 % 10;
                    let d2_10 = getRandomInt(0, d1_10);
                    let d2_1 = getRandomInt(0, d1_1);
                    n2 = (d2_10 * 10) + d2_1;
                    if(n2===0) n2=1;
                    if(n2 >= n1) n2 = getRandomInt(1, n1-1);
                    currentAnswer = n1 - n2;
                    gameContent.innerHTML = `<div class="problem-display">${n1} - ${n2} = ?</div>`;
                }

            } else if (currentMode === 'max') {
                const op = Math.random() > 0.5 ? '+' : '-';
                let n1, n2;

                if(op === '+') {
                    let u1 = getRandomInt(1, 9);
                    let minU2 = 10 - u1;
                    let u2 = getRandomInt(minU2, 9);
                    let t1 = getRandomInt(1, difficultyLevel === 1 ? 4 : 8);
                    let t2 = getRandomInt(0, 9 - t1);
                    n1 = (t1 * 10) + u1;
                    n2 = (t2 * 10) + u2;
                    currentAnswer = n1 + n2;
                    gameContent.innerHTML = `<div class="problem-display">${n1} + ${n2} = ?</div>`;
                } else {
                    let u1 = getRandomInt(0, 8);
                    let u2 = getRandomInt(u1 + 1, 9);
                    let t1 = getRandomInt(difficultyLevel === 1 ? 2 : 5, 9);
                    let t2 = getRandomInt(0, t1 - 1);
                    n1 = (t1 * 10) + u1;
                    n2 = (t2 * 10) + u2;
                    currentAnswer = n1 - n2;
                    gameContent.innerHTML = `<div class="problem-display">${n1} - ${n2} = ?</div>`;
                }

            } else {
                const n1 = getRandomInt(2, 9);
                const n2 = getRandomInt(2, 9);
                currentAnswer = n1 * n2;
                gameContent.innerHTML = `<div class="problem-display">${n1} √ó ${n2} = ?</div>`;
            }
        }

        function checkAnswer() {
            const userVal = parseInt(answerInput.value);
            if (isNaN(userVal)) return;

            if (userVal === currentAnswer) {
                score++;
                scoreDisplay.textContent = `Puncte: ${score} üèÜ`;
                feedbackText.textContent = "Bravo! E»ôti campion! üéâ";
                feedbackText.className = "feedback correct";
                difficultyLevel = 1;
                setTimeout(nextProblem, 1500);
            } else {
                feedbackText.textContent = "Mai √ÆncearcƒÉ o datƒÉ! (Dificultate crescutƒÉ) üòä";
                feedbackText.className = "feedback wrong";
                difficultyLevel++;
                answerInput.value = '';
                answerInput.focus();
                setTimeout(nextProblem, 1500);
            }
        }

        init();
    </script>
</body>
</html>

