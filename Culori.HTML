<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0">
    <title>Jocul Desenelor Realiste</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0f8ff;
            padding: 10px;
            touch-action: none;
            overscroll-behavior: contain;
            -webkit-tap-highlight-color: transparent;
            width: 100vw;
            overflow-x: hidden;
        }
        h1 {
            color: #2c3e50;
            margin: 8px 0 6px;
            font-size: 18px;
            text-align: center;
            line-height: 1.2;
        }
        .instructions {
            text-align: center;
            margin-bottom: 10px;
            color: #555;
            font-size: 13px;
            padding: 0 6px;
        }
        .tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 10px;
            flex-wrap: nowrap;
            justify-content: flex-start;
            max-width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            padding: 4px 2px;
        }
        .tabs::-webkit-scrollbar {
            display: none;
        }
        .tab {
            padding: 4px 8px;
            background: #ddd;
            border: 1px solid #999;
            border-radius: 14px;
            font-size: 12px;
            cursor: pointer;
            user-select: none;
            white-space: nowrap;
            flex-shrink: 0;
        }
        .tab.active {
            background: #3498db;
            color: white;
        }
        .palette {
            display: flex;
            gap: 4px;
            margin-bottom: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        .color-option {
            width: 32px;
            height: 32px;
            border: 2px solid #333;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 12px;
            color: white;
            text-shadow: 1px 1px 1px rgba(0,0,0,0.7);
            cursor: pointer;
        }
        .color-option.selected {
            transform: scale(1.15);
            box-shadow: 0 0 5px rgba(0,0,0,0.6);
        }
        .grid {
            display: grid;
            gap: 1px;
            padding: 5px;
            background-color: #ccc;
            border-radius: 5px;
            border: 1px solid #999;
            max-width: 100%;
            overflow: hidden;
            margin: 0 auto;
        }
        .cell {
            background-color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 8px;
            font-weight: bold;
            color: #333;
            border: 1px solid #ddd;
            user-select: none;
            pointer-events: auto;
        }
        .cell.filled {
            color: transparent !important;
            text-shadow: none;
        }
        .cell.empty {
            background-color: #f8f9fa !important;
            border: 1px solid #eee;
        }
    </style>
</head>
<body>
    <h1>Jocul Desenelor Realiste</h1>
    <div class="instructions">
        Alege un desen, apoi un număr. Trage degetul pe pătrățelele cu acel număr pentru a le colora!
    </div>

    <div class="tabs" id="tabs"></div>
    <div class="palette" id="palette"></div>
    <div class="grid" id="grid"></div>

    <script>
        // Paletă realistă de culori pentru numere (inspirată din natură și obiecte reale)
        const numberColors = {
            0: '#f8f9fa', // alb-deschis pentru fundal (fără număr)
            1: '#8B4513', // maro pentru trunchiuri, pământ
            2: '#228B22', // verde închis pentru frunze
            3: '#32CD32', // verde deschis pentru iarbă
            4: '#FF4500', // roșu-portocaliu pentru flori, detalii
            5: '#4682B4', // albastru oțel pentru apă, cer
            6: '#DAA520', // aur pentru detalii, stele
            7: '#A0522D', // maro închis pentru umbre
            8: '#FFD700', // aur deschis pentru soare, lumină
            9: '#696969', // gri pentru pietre, umbre
            10: '#87CEEB', // albastru cer
            11: '#FF6347', // roșu-tomate pentru flori
            12: '#9ACD32', // verde-lămâie pentru frunze tinere
            13: '#4B0082', // indigo pentru flori rare
            14: '#FF1493', // roz intens pentru flori
            15: '#00CED1', // turcoaz pentru apă curată
            16: '#CD5C5C', // roșu-pământiu pentru flori
            17: '#BDB76B', // verde-măslin pentru frunze
            18: '#5F9EA0', // cadet blue pentru apă
            19: '#FFA500', // portocaliu pentru detalii
            20: '#2E8B57'  // verde-marin pentru conifere
        };

        function getColorForNumber(num) {
            if (numberColors[num] !== undefined) {
                return numberColors[num];
            }
            const hues = [0, 30, 60, 120, 180, 240, 300];
            const saturation = [40, 60, 80];
            const lightness = [30, 50, 70];
            const h = hues[num % hues.length];
            const s = saturation[Math.floor(num / hues.length) % saturation.length];
            const l = lightness[Math.floor(num / (hues.length * saturation.length)) % lightness.length];
            return `hsl(${h}, ${s}%, ${l}%)`;
        }

        const drawings = {
            "Stejar": {
                size: 16,
                grid: [
                    [0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0],
                    [0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0],
                    [0,0,0,0,0,2,2,3,3,2,2,0,0,0,0,0],
                    [0,0,0,0,2,2,3,3,3,3,2,2,0,0,0,0],
                    [0,0,0,2,2,3,3,3,3,3,3,2,2,0,0,0],
                    [0,0,2,2,3,3,3,3,3,3,3,3,2,2,0,0],
                    [0,2,2,3,3,3,3,3,3,3,3,3,3,2,2,0],
                    [0,0,1,1,3,3,3,3,3,3,3,3,1,1,0,0],
                    [0,0,1,1,3,3,3,3,3,3,3,3,1,1,0,0],
                    [0,0,1,1,7,7,7,7,7,7,7,7,1,1,0,0],
                    [0,0,0,1,1,7,7,7,7,7,7,1,1,0,0,0],
                    [0,0,0,0,1,1,7,7,7,7,1,1,0,0,0,0],
                    [0,0,0,0,0,1,1,7,7,1,1,0,0,0,0,0],
                    [0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0],
                    [0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0],
                    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
                ]
            },
            "Lalea": {
                size: 14,
                grid: [
                    [0,0,0,0,0,4,4,0,0,0,0,0,0,0],
                    [0,0,0,0,4,11,11,4,0,0,0,0,0,0],
                    [0,0,0,4,11,11,11,11,4,0,0,0,0,0],
                    [0,0,4,11,11,11,11,11,11,4,0,0,0,0],
                    [0,0,0,4,11,11,11,11,4,0,0,0,0,0],
                    [0,0,0,0,4,11,11,4,0,0,0,0,0,0],
                    [0,0,0,0,0,4,4,0,0,0,0,0,0,0],
                    [0,0,0,0,0,1,1,0,0,0,0,0,0,0],
                    [0,0,0,0,0,1,1,0,0,0,0,0,0,0],
                    [0,0,0,0,1,1,1,1,0,0,0,0,0,0],
                    [0,0,0,0,1,7,7,1,0,0,0,0,0,0],
                    [0,0,0,0,0,1,1,0,0,0,0,0,0,0],
                    [0,0,0,3,3,3,3,3,3,0,0,0,0,0],
                    [0,0,3,3,3,3,3,3,3,3,0,0,0,0]
                ]
            },
            "Munte": {
                size: 16,
                grid: [
                    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                    [0,0,0,0,0,0,0,5,5,0,0,0,0,0,0,0],
                    [0,0,0,0,0,0,5,5,5,5,0,0,0,0,0,0],
                    [0,0,0,0,0,5,5,10,10,5,5,0,0,0,0,0],
                    [0,0,0,0,5,5,10,10,10,10,5,5,0,0,0,0],
                    [0,0,0,5,5,10,10,10,10,10,10,5,5,0,0,0],
                    [0,0,5,5,10,10,10,10,10,10,10,10,5,5,0,0],
                    [0,5,5,10,10,10,10,10,10,10,10,10,10,5,5,0],
                    [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
                    [0,1,9,9,1,9,9,1,9,9,1,9,9,1,1,0],
                    [0,1,9,9,9,9,9,9,9,9,9,9,9,1,1,0],
                    [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
                    [3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],
                    [3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],
                    [3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3]
                ]
            },
            "Pisică": {
                size: 14,
                grid: [
                    [0,0,0,1,0,0,0,0,0,1,0,0,0,0],
                    [0,0,1,7,1,0,0,0,1,7,1,0,0,0],
                    [0,1,7,7,7,1,0,1,7,7,7,1,0,0],
                    [0,1,7,7,7,7,1,7,7,7,7,1,0,0],
                    [0,0,1,7,7,7,7,7,7,7,1,0,0,0],
                    [0,0,0,1,7,7,7,7,7,1,0,0,0,0],
                    [0,0,0,0,1,7,7,7,1,0,0,0,0,0],
                    [0,0,0,0,0,1,7,1,0,0,0,0,0,0],
                    [0,0,0,0,0,0,1,0,0,0,0,0,0,0],
                    [0,0,0,0,2,2,2,2,2,0,0,0,0,0],
                    [0,0,0,0,2,6,6,2,2,0,0,0,0,0],
                    [0,0,0,0,0,2,2,0,0,0,0,0,0,0],
                    [0,0,0,0,0,4,4,0,0,0,0,0,0,0],
                    [0,0,0,0,4,4,4,4,0,0,0,0,0,0]
                ]
            },
            "Fluture": {
                size: 14,
                grid: [
                    [0,0,0,0,14,14,0,0,14,14,0,0,0,0],
                    [0,0,0,14,4,4,14,14,4,4,14,0,0,0],
                    [0,0,14,4,11,11,4,4,11,11,4,14,0,0],
                    [0,14,4,11,6,6,11,11,6,6,11,4,14,0],
                    [0,14,4,11,6,8,6,6,8,6,11,4,14,0],
                    [0,0,14,4,11,6,6,6,6,11,4,14,0,0],
                    [0,0,0,14,4,11,11,11,11,4,14,0,0,0],
                    [0,0,0,0,14,4,4,4,4,14,0,0,0,0],
                    [0,0,0,0,0,14,4,4,14,0,0,0,0,0],
                    [0,0,0,0,0,0,14,14,0,0,0,0,0,0],
                    [0,0,0,0,0,0,1,1,0,0,0,0,0,0],
                    [0,0,0,0,0,1,1,1,1,0,0,0,0,0],
                    [0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                    [0,0,0,0,0,0,0,0,0,0,0,0,0,0]
                ]
            },
            "Soare": {
                size: 14,
                grid: [
                    [0,0,0,0,8,8,8,8,8,8,0,0,0,0],
                    [0,0,0,8,8,6,6,6,6,8,8,0,0,0],
                    [0,0,8,8,6,8,8,8,8,6,8,8,0,0],
                    [0,8,8,6,8,8,8,8,8,8,6,8,8,0],
                    [8,8,6,8,8,8,8,8,8,8,8,6,8,8],
                    [8,6,8,8,8,8,8,8,8,8,8,8,6,8],
                    [8,6,8,8,8,8,8,8,8,8,8,8,6,8],
                    [8,6,8,8,8,8,8,8,8,8,8,8,6,8],
                    [8,6,8,8,8,8,8,8,8,8,8,8,6,8],
                    [8,8,6,8,8,8,8,8,8,8,8,6,8,8],
                    [0,8,8,6,8,8,8,8,8,8,6,8,8,0],
                    [0,0,8,8,6,8,8,8,8,6,8,8,0,0],
                    [0,0,0,8,8,6,6,6,6,8,8,0,0,0],
                    [0,0,0,0,8,8,8,8,8,8,0,0,0,0]
                ]
            },
            "Pește": {
                size: 14,
                grid: [
                    [0,0,0,0,0,2,2,2,2,0,0,0,0,0],
                    [0,0,0,0,2,15,15,15,15,2,0,0,0,0],
                    [0,0,0,2,15,4,4,4,4,15,2,0,0,0],
                    [0,0,2,15,4,6,6,6,6,4,15,2,0,0],
                    [0,2,15,4,6,8,8,8,8,6,4,15,2,0],
                    [0,2,15,4,6,8,8,8,8,6,4,15,2,0],
                    [0,0,2,15,4,6,6,6,6,4,15,2,0,0],
                    [0,0,0,2,15,4,4,4,4,15,2,0,0,0],
                    [0,0,0,0,2,15,15,15,15,2,0,0,0,0],
                    [0,0,0,0,0,2,2,2,2,0,0,0,0,0],
                    [0,0,0,0,0,0,1,1,0,0,0,0,0,0],
                    [0,0,0,0,0,1,1,1,1,0,0,0,0,0],
                    [0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                    [0,0,0,0,0,0,0,0,0,0,0,0,0,0]
                ]
            },
            "Căprioară": {
                size: 16,
                grid: [
                    [0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0],
                    [0,0,0,0,0,0,1,7,7,1,0,0,0,0,0,0],
                    [0,0,0,0,0,1,7,7,7,7,1,0,0,0,0,0],
                    [0,0,0,0,1,7,7,7,7,7,7,1,0,0,0,0],
                    [0,0,0,1,7,7,7,7,7,7,7,7,1,0,0,0],
                    [0,0,1,7,7,7,7,7,7,7,7,7,7,1,0,0],
                    [0,1,7,7,7,7,7,7,7,7,7,7,7,7,1,0],
                    [0,0,1,7,7,7,7,7,7,7,7,7,7,1,0,0],
                    [0,0,0,1,7,7,7,7,7,7,7,7,1,0,0,0],
                    [0,0,0,0,1,7,7,7,7,7,7,1,0,0,0,0],
                    [0,0,0,0,0,1,7,7,7,7,1,0,0,0,0,0],
                    [0,0,0,0,0,0,1,7,7,1,0,0,0,0,0,0],
                    [0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0],
                    [0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0],
                    [0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0],
                    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
                ]
            },
            "Trandafir": {
                size: 14,
                grid: [
                    [0,0,0,0,0,4,4,0,0,0,0,0,0,0],
                    [0,0,0,0,4,16,16,4,0,0,0,0,0,0],
                    [0,0,0,4,16,16,16,16,4,0,0,0,0,0],
                    [0,0,4,16,16,16,16,16,16,4,0,0,0,0],
                    [0,0,0,4,16,16,16,16,4,0,0,0,0,0],
                    [0,0,0,0,4,16,16,4,0,0,0,0,0,0],
                    [0,0,0,0,0,4,4,0,0,0,0,0,0,0],
                    [0,0,0,0,0,1,1,0,0,0,0,0,0,0],
                    [0,0,0,0,1,1,1,1,0,0,0,0,0,0],
                    [0,0,0,0,1,7,7,1,0,0,0,0,0,0],
                    [0,0,0,0,0,1,1,0,0,0,0,0,0,0],
                    [0,0,0,3,3,3,3,3,3,0,0,0,0,0],
                    [0,0,3,3,3,3,3,3,3,3,0,0,0,0],
                    [0,3,3,3,3,3,3,3,3,3,3,0,0,0]
                ]
            },
            "Papagal": {
                size: 14,
                grid: [
                    [0,0,0,0,0,1,1,0,0,0,0,0,0,0],
                    [0,0,0,0,1,7,7,1,0,0,0,0,0,0],
                    [0,0,0,1,7,7,7,7,1,0,0,0,0,0],
                    [0,0,1,7,7,7,7,7,7,1,0,0,0,0],
                    [0,0,1,7,7,7,7,7,7,1,0,0,0,0],
                    [0,0,0,1,7,7,7,7,1,0,0,0,0,0],
                    [0,0,0,0,1,7,7,1,0,0,0,0,0,0],
                    [0,0,0,0,0,1,1,0,0,0,0,0,0,0],
                    [0,0,0,0,0,2,2,0,0,0,0,0,0,0],
                    [0,0,0,0,2,14,14,2,0,0,0,0,0,0],
                    [0,0,0,0,2,14,14,2,0,0,0,0,0,0],
                    [0,0,0,0,0,2,2,0,0,0,0,0,0,0],
                    [0,0,0,0,0,4,4,0,0,0,0,0,0,0],
                    [0,0,0,0,4,4,4,4,0,0,0,0,0,0]
                ]
            },
            "Liliac": {
                size: 14,
                grid: [
                    [0,0,0,0,0,13,13,0,0,0,0,0,0,0],
                    [0,0,0,0,13,4,4,13,0,0,0,0,0,0],
                    [0,0,0,13,4,13,13,4,13,0,0,0,0,0],
                    [0,0,13,4,13,13,13,13,4,13,0,0,0,0],
                    [0,0,0,13,4,13,13,4,13,0,0,0,0,0],
                    [0,0,0,0,13,4,4,13,0,0,0,0,0,0],
                    [0,0,0,0,0,13,13,0,0,0,0,0,0,0],
                    [0,0,0,0,0,1,1,0,0,0,0,0,0,0],
                    [0,0,0,0,1,1,1,1,0,0,0,0,0,0],
                    [0,0,0,0,1,7,7,1,0,0,0,0,0,0],
                    [0,0,0,0,0,1,1,0,0,0,0,0,0,0],
                    [0,0,0,3,3,3,3,3,3,0,0,0,0,0],
                    [0,0,3,3,3,3,3,3,3,3,0,0,0,0],
                    [0,3,3,3,3,3,3,3,3,3,3,0,0,0]
                ]
            },
            "Cerbul": {
                size: 16,
                grid: [
                    [0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0],
                    [0,0,0,0,0,0,0,1,7,7,1,0,0,0,0,0],
                    [0,0,0,0,0,0,1,7,7,7,7,1,0,0,0,0],
                    [0,0,0,0,0,1,7,7,7,7,7,7,1,0,0,0],
                    [0,0,0,0,1,7,7,7,7,7,7,7,7,1,0,0],
                    [0,0,0,1,7,7,7,7,7,7,7,7,7,7,1,0],
                    [0,0,1,7,7,7,7,7,7,7,7,7,7,7,7,1],
                    [0,0,0,1,7,7,7,7,7,7,7,7,7,7,1,0],
                    [0,0,0,0,1,7,7,7,7,7,7,7,7,1,0,0],
                    [0,0,0,0,0,1,7,7,7,7,7,7,1,0,0,0],
                    [0,0,0,0,0,0,1,7,7,7,7,1,0,0,0,0],
                    [0,0,0,0,0,0,0,1,7,7,1,0,0,0,0,0],
                    [0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0],
                    [0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0],
                    [0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0],
                    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
                ]
            },
            "Măr": {
                size: 14,
                grid: [
                    [0,0,0,0,0,0,4,4,0,0,0,0,0,0],
                    [0,0,0,0,0,4,4,4,4,0,0,0,0,0],
                    [0,0,0,0,0,4,4,4,4,0,0,0,0,0],
                    [0,0,0,0,0,0,4,4,0,0,0,0,0,0],
                    [0,0,0,0,0,0,1,1,0,0,0,0,0,0],
                    [0,0,0,0,0,1,1,1,1,0,0,0,0,0],
                    [0,0,0,0,1,1,1,1,1,1,0,0,0,0],
                    [0,0,0,1,1,1,1,1,1,1,1,0,0,0],
                    [0,0,0,0,1,1,1,1,1,1,0,0,0,0],
                    [0,0,0,0,0,1,1,1,1,0,0,0,0,0],
                    [0,0,0,0,0,0,1,1,0,0,0,0,0,0],
                    [0,0,0,0,0,0,2,2,0,0,0,0,0,0],
                    [0,0,0,0,0,2,2,2,2,0,0,0,0,0],
                    [0,0,0,0,0,0,0,0,0,0,0,0,0,0]
                ]
            },
            "Lup": {
                size: 14,
                grid: [
                    [0,0,0,0,0,1,1,0,0,0,0,0,0,0],
                    [0,0,0,0,1,7,7,1,0,0,0,0,0,0],
                    [0,0,0,1,7,7,7,7,1,0,0,0,0,0],
                    [0,0,1,7,7,7,7,7,7,1,0,0,0,0],
                    [0,0,1,7,7,7,7,7,7,1,0,0,0,0],
                    [0,0,0,1,7,7,7,7,1,0,0,0,0,0],
                    [0,0,0,0,1,7,7,1,0,0,0,0,0,0],
                    [0,0,0,0,0,1,1,0,0,0,0,0,0,0],
                    [0,0,0,0,0,2,2,0,0,0,0,0,0,0],
                    [0,0,0,0,2,9,9,2,0,0,0,0,0,0],
                    [0,0,0,0,0,2,2,0,0,0,0,0,0,0],
                    [0,0,0,0,0,4,4,0,0,0,0,0,0,0],
                    [0,0,0,0,4,4,4,4,0,0,0,0,0,0],
                    [0,0,0,0,0,0,0,0,0,0,0,0,0,0]
                ]
            },
            "Urs": {
                size: 14,
                grid: [
                    [0,0,0,0,0,1,1,0,0,0,0,0,0,0],
                    [0,0,0,0,1,7,7,1,0,0,0,0,0,0],
                    [0,0,0,1,7,7,7,7,1,0,0,0,0,0],
                    [0,0,1,7,7,7,7,7,7,1,0,0,0,0],
                    [0,0,1,7,7,7,7,7,7,1,0,0,0,0],
                    [0,0,0,1,7,7,7,7,1,0,0,0,0,0],
                    [0,0,0,0,1,7,7,1,0,0,0,0,0,0],
                    [0,0,0,0,0,1,1,0,0,0,0,0,0,0],
                    [0,0,0,0,0,2,2,0,0,0,0,0,0,0],
                    [0,0,0,0,2,9,9,2,0,0,0,0,0,0],
                    [0,0,0,0,2,9,9,2,0,0,0,0,0,0],
                    [0,0,0,0,0,2,2,0,0,0,0,0,0,0],
                    [0,0,0,0,0,4,4,0,0,0,0,0,0,0],
                    [0,0,0,0,4,4,4,4,0,0,0,0,0,0]
                ]
            },
            "Căprioară Mică": {
                size: 12,
                grid: [
                    [0,0,0,0,0,1,1,0,0,0,0,0],
                    [0,0,0,0,1,7,7,1,0,0,0,0],
                    [0,0,0,1,7,7,7,7,1,0,0,0],
                    [0,0,1,7,7,7,7,7,7,1,0,0],
                    [0,0,0,1,7,7,7,7,1,0,0,0],
                    [0,0,0,0,1,7,7,1,0,0,0,0],
                    [0,0,0,0,0,1,1,0,0,0,0,0],
                    [0,0,0,0,0,2,2,0,0,0,0,0],
                    [0,0,0,0,2,2,2,2,0,0,0,0],
                    [0,0,0,0,0,0,0,0,0,0,0,0],
                    [0,0,0,3,3,3,3,3,3,0,0,0],
                    [0,0,3,3,3,3,3,3,3,3,0,0]
                ]
            }
        };

        let currentDrawing = "Stejar";
        let selectedNumber = null;

        function getUniqueNumbers() {
            const grid = drawings[currentDrawing].grid;
            const numbers = new Set();
            for (let row of grid) {
                for (let num of row) {
                    if (num !== 0) numbers.add(num); // excludem 0 din paletă
                }
            }
            return Array.from(numbers).sort((a, b) => a - b);
        }

        function colorCell(cell) {
            if (selectedNumber === null) return;
            const num = parseInt(cell.dataset.number);
            if (num === selectedNumber && !cell.classList.contains('filled')) {
                const color = getColorForNumber(selectedNumber);
                cell.style.backgroundColor = color;
                cell.classList.add('filled');
                cell.textContent = '';
            }
        }

        function setupCellEvents(cell) {
            let isTouched = false;

            cell.addEventListener('pointerdown', (e) => {
                e.preventDefault();
                isTouched = true;
                colorCell(cell);
            });

            cell.addEventListener('pointerenter', (e) => {
                if (isTouched) {
                    colorCell(cell);
                }
            });

            const release = () => {
                isTouched = false;
            };

            cell.addEventListener('pointerup', release);
            cell.addEventListener('pointerleave', release);
            cell.addEventListener('pointercancel', release);
        }

        function createTabs() {
            const tabsContainer = document.getElementById('tabs');
            tabsContainer.innerHTML = '';
            Object.keys(drawings).forEach(name => {
                const tab = document.createElement('div');
                tab.className = 'tab';
                if (name === currentDrawing) tab.classList.add('active');
                tab.textContent = name;
                tab.addEventListener('click', () => {
                    currentDrawing = name;
                    createTabs();
                    createPalette();
                    createGrid();
                });
                tabsContainer.appendChild(tab);
            });
        }

        function createPalette() {
            const palette = document.getElementById('palette');
            palette.innerHTML = '';
            const numbers = getUniqueNumbers(); // fără 0

            numbers.forEach(num => {
                const el = document.createElement('div');
                el.className = 'color-option';
                el.style.backgroundColor = getColorForNumber(num);
                el.textContent = num;
                el.dataset.number = num;
                el.addEventListener('click', () => {
                    document.querySelectorAll('.color-option').forEach(e => e.classList.remove('selected'));
                    el.classList.add('selected');
                    selectedNumber = num;
                });
                palette.appendChild(el);
            });
        }

        function createGrid() {
            const gridContainer = document.getElementById('grid');
            const drawing = drawings[currentDrawing];
            const size = drawing.size;
            const gridData = drawing.grid;

            const maxWidth = Math.min(window.innerWidth - 20, 320);
            const cellSize = Math.floor(maxWidth / size);
            const finalCellSize = Math.max(16, Math.min(cellSize, 22));

            gridContainer.style.gridTemplateColumns = `repeat(${size}, ${finalCellSize}px)`;
            gridContainer.innerHTML = '';

            for (let r = 0; r < size; r++) {
                for (let c = 0; c < size; c++) {
                    const num = gridData[r][c];
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    if (num === 0) {
                        cell.classList.add('empty');
                    } else {
                        cell.textContent = num;
                    }
                    cell.style.width = `${finalCellSize}px`;
                    cell.style.height = `${finalCellSize}px`;
                    cell.dataset.number = num;

                    setupCellEvents(cell);
                    gridContainer.appendChild(cell);
                }
            }
        }

        // Inițializare
        createTabs();
        createPalette();
        createGrid();

        window.addEventListener('resize', () => {
            createGrid();
        });
    </script>
</body>
</html>